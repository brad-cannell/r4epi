<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>27&nbsp; Subsetting Data Frames ‚Äì R 4 Epidemiology</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../chapters/working_with_dates/working_with_dates.html" rel="next">
<link href="../../chapters/creating_and_modifying_columns/creating_and_modifying_columns.html" rel="prev">
<link href="../../r4epi_favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-626149efe8f5d16e1d391ba177679bf0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-0RREBTQ0D9"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-0RREBTQ0D9', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../chapters/intro_data_management/introduction.html">Data Management</a></li><li class="breadcrumb-item"><a href="../../chapters/subsetting_data_frames/subsetting_data_frames.html"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Subsetting Data Frames</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">R 4 Epidemiology</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/brad-cannell/r4epi_quarto/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="../../R-4-Epidemiology.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/contributing/contributing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contributing</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/about_the_authors/about_the_authors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">About the Authors</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/installing_r_and_rstudio/installing_r_and_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Installing R and RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/what_is_r/what_is_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">What is R?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/navigating_rstudio/navigating_rstudio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Navigating the RStudio Interface</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/speaking_r/speaking_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Speaking R‚Äôs Language</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/lets_get_programming/lets_get_programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Let‚Äôs Get Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/asking_questions/asking_questions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Asking Questions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Coding Tools and Best Practices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/r_scripts/r_scripts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">R Scripts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/quarto_files/quarto_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Quarto Files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/r_projects/projects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">R Projects</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/best_practices/best_practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Coding Best Practices</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/using_pipes/using_pipes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Using Pipes</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Data Transfer</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/data_transfer/data_transfer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to Data Transfer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/file_paths/file_paths.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">File Paths</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/importing_plain_text/importing_plain_text.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Importing Plain Text Files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/importing_binary_files/importing_binary_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Importing Binary Files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/rstudio_import_tool/rstudio_import_tool.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">RStudio‚Äôs Data Import Tool</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/exporting_data_to_disk/exporting_data_to_disk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Exporting Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Descriptive Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/intro_descriptive_analysis/intro_descriptive_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Introduction to Descriptive Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/categorical_variables/categorical_variables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Numerical Descriptions of Categorical Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/central_tendency/central_tendency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Measures of Central Tendency</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/dispersion/dispersion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Measures of Dispersion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/cont_out_cont_pred/cont_out_cont_pred.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Describing the Relationship Between a Continuous Outcome and a Continuous Predictor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/cont_out_cat_pred/cont_out_cat_pred.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Describing the Relationship Between a Continuous Outcome and a Categorical Predictor</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/cat_out_cat_pred/cat_out_cat_pred.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Describing the Relationship Between a Categorical Outcome and a Categorical Predictor</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Data Management</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/intro_data_management/introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Introduction to Data Management</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/creating_and_modifying_columns/creating_and_modifying_columns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Creating and Modifying Columns</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/subsetting_data_frames/subsetting_data_frames.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Subsetting Data Frames</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/working_with_dates/working_with_dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Working with Dates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/working_with_character_strings/working_with_character_strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Working with Character Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/conditional_operations/conditional_operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Conditional Operations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/multiple_data_frames/multiple_data_frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Working with Multiple Data Frames</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/restructuring_data_frames/restructuring_data_frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Restructuring Data frames</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Repeated Operations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/intro_repeated_operations/intro_repeated_operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Introduction to Repeated Operations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/writing_functions/writing_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Writing Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/dplyr_column_wise/dplyr_column_wise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Column-wise Operations in dplyr</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/writing_for_loops/writing_for_loops.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Writing For Loops</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/using_purrr/using_purrr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Using the purrr Package</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Collaboration</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/intro_git_github/intro_git_github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Introduction to git and GitHub</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/using_git_github/using_git_github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Using git and GitHub</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Presenting Results</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/creating_word_tables/creating_word_tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Creating Tables with R and Microsoft Word</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">References</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../chapters/appendices/glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Glossary</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-select-function" id="toc-the-select-function" class="nav-link active" data-scroll-target="#the-select-function"><span class="header-section-number">27.1</span> The select() function</a></li>
  <li><a href="#the-rename-function" id="toc-the-rename-function" class="nav-link" data-scroll-target="#the-rename-function"><span class="header-section-number">27.2</span> The rename() function</a></li>
  <li><a href="#the-filter-function" id="toc-the-filter-function" class="nav-link" data-scroll-target="#the-filter-function"><span class="header-section-number">27.3</span> The filter() function</a>
  <ul class="collapse">
  <li><a href="#subgroup-analysis" id="toc-subgroup-analysis" class="nav-link" data-scroll-target="#subgroup-analysis"><span class="header-section-number">27.3.1</span> Subgroup analysis</a></li>
  <li><a href="#complete-case-analysis" id="toc-complete-case-analysis" class="nav-link" data-scroll-target="#complete-case-analysis"><span class="header-section-number">27.3.2</span> Complete case analysis</a></li>
  </ul></li>
  <li><a href="#deduplication" id="toc-deduplication" class="nav-link" data-scroll-target="#deduplication"><span class="header-section-number">27.4</span> Deduplication</a>
  <ul class="collapse">
  <li><a href="#the-distinct-function" id="toc-the-distinct-function" class="nav-link" data-scroll-target="#the-distinct-function"><span class="header-section-number">27.4.1</span> The distinct() function</a></li>
  <li><a href="#complete-duplicate-row-add-tag" id="toc-complete-duplicate-row-add-tag" class="nav-link" data-scroll-target="#complete-duplicate-row-add-tag"><span class="header-section-number">27.4.2</span> Complete duplicate row add tag</a></li>
  <li><a href="#partial-duplicate-rows" id="toc-partial-duplicate-rows" class="nav-link" data-scroll-target="#partial-duplicate-rows"><span class="header-section-number">27.4.3</span> Partial duplicate rows</a></li>
  <li><a href="#partial-duplicate-rows---add-tag" id="toc-partial-duplicate-rows---add-tag" class="nav-link" data-scroll-target="#partial-duplicate-rows---add-tag"><span class="header-section-number">27.4.4</span> Partial duplicate rows - add tag</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/brad-cannell/r4epi_quarto/edit/main/chapters/subsetting_data_frames/subsetting_data_frames.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/brad-cannell/r4epi_quarto/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../chapters/intro_data_management/introduction.html">Data Management</a></li><li class="breadcrumb-item"><a href="../../chapters/subsetting_data_frames/subsetting_data_frames.html"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Subsetting Data Frames</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Subsetting Data Frames</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!--
select
  - tidy-select
  - Subsetting by name and position
rename
filter
  - missing data
  - Delete all missing
arrange
deduplication
  - numbering rows
  - No difference - drop
  - Obviously an error - drop
  - Systematically do something and report it
  - Don't pick and choose, or even give the appearance of picking and choosing, rows with values that are aligned with the results you want to see.

Maybe modulo operator
Maybe logical indexes
-->
<p>Subsetting data frames is another one of the most common data management tasks we carryout in our data analysis projects. Subsetting data frames just refers to the process of deciding which columns and rows to keep in your data frame and which to drop.</p>
<p>For example, we may need to subset the rows of a data frame because we‚Äôre interested in understanding a subpopulation in our sample. Below, we only want to analyze the rows that correspond to participants from Texas.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="rows.png" class="img-fluid figure-img" width="900"></p>
</figure>
</div>
</div>
</div>
<p>Or, perhaps we‚Äôre only interested in a subset of the statistics returned to me in a data frame of analysis results. Below, we only want to view and present the variable name, variable category, count, and percent.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="columns.png" class="img-fluid figure-img" width="900"></p>
</figure>
</div>
</div>
</div>
<p>Fortunately, the <code>dplyr</code> package includes functions that make it really easy for us to subset our data frames ‚Äì even in some fairly complicated ways. Let‚Äôs start by simulating the same drug trial data we simulated in the last chapter and use it to work through some examples.</p>
<p>As a reminder, we are simulating some drug trial data that includes the following variables:</p>
<ul>
<li><p>id: Study id, there are 20 people enrolled in the trial.</p></li>
<li><p>year: Follow-up year, 0 = baseline, 1 = year one, 2 = year two.</p></li>
<li><p>age: Participant age a baseline. Must be between the ages of 35 and 75 at baseline to be eligible for the study.</p></li>
<li><p>drug: Drug the participant received, Placebo or active.</p></li>
<li><p>se_headache: Reported headaches side effect, Y/N.</p></li>
<li><p>se_diarrhea: Report diarrhea side effect, Y/N.</p></li>
<li><p>se_dry_mouth: Report dry mouth side effect, Y/N.</p></li>
<li><p>mi: Participant had myocardial infarction in study year, Y/N.</p></li>
</ul>
<p>Actually, this data is slightly different than the data we used in the last chapter. Did you catch the difference? Take another look:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 7
    year   age drug    se_headache se_diarrhea se_dry_mouth    mi
   &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;
 1     0    65 Active            0           1            1     0
 2     1    65 Active            1           1            1     0
 3     2    65 Active            1           1            0     0
 4     0    49 Active            1           1            1     0
 5     1    49 Active            0           0            1     0
 6     2    49 Active            1           1            1     0
 7     0    48 Placebo           0           0            0     0
 8     1    48 Placebo           0           0            0     0
 9     2    48 Placebo           0           0            0     0
10     0    37 Placebo           0           0            0     0
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>we forgot to put a study id in our data. Because we simulated this data above, the best way to fix this oversite is to make the necessary change to the simulation code above. But, let‚Äôs pretend that someone sent us this data instead, and we have to add a new study id column to it. Well, we now know how to use the <code>mutate()</code> function to columns to our data frame. We can do so like this:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 8
    year   age drug    se_headache se_diarrhea se_dry_mouth    mi    id
   &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1     0    65 Active            0           1            1     0     1
 2     1    65 Active            1           1            1     0     1
 3     2    65 Active            1           1            0     0     1
 4     0    49 Active            1           1            1     0     2
 5     1    49 Active            0           0            1     0     2
 6     2    49 Active            1           1            1     0     2
 7     0    48 Placebo           0           0            0     0     3
 8     1    48 Placebo           0           0            0     0     3
 9     2    48 Placebo           0           0            0     0     3
10     0    37 Placebo           0           0            0     0     4
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>And now we have the study id in our data. But, by default R adds new columns as the rightmost column of the data frame. In terms of analysis, it doesn‚Äôt really matter where this column is located in our data. R couldn‚Äôt care less. However, when humans look at this data, they typically expect the study id (or some other identifier) to be the first column in the data frame. That is a job for <code>select()</code>.</p>
<section id="the-select-function" class="level2" data-number="27.1">
<h2 data-number="27.1" class="anchored" data-anchor-id="the-select-function"><span class="header-section-number">27.1</span> The select() function</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 7
      id  year   age se_headache se_diarrhea se_dry_mouth    mi
   &lt;int&gt; &lt;int&gt; &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;
 1     1     0    65           0           1            1     0
 2     1     1    65           1           1            1     0
 3     1     2    65           1           1            0     0
 4     2     0    49           1           1            1     0
 5     2     1    49           0           0            1     0
 6     2     2    49           1           1            1     0
 7     3     0    48           0           0            0     0
 8     3     1    48           0           0            0     0
 9     3     2    48           0           0            0     0
10     4     0    37           0           0            0     0
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>select()</code> function to change the order of the columns in the <code>drug_trial</code> data frame so that <code>id</code> would be the first variable in the data frame when reading from left to right.</p></li>
<li><p>You can type <code>?select</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>select()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% select()</code>).</p></li>
<li><p>The second argument to the <code>select()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should column names or expressions that return column positions. We‚Äôll dive deeper into this soon.</p></li>
</ul>
<p>More generally, the <code>select()</code> function tells R which variables in your data frame to keep (or drop) and in what order.</p>
<p>The code above gave us the result we wanted. üëè But, it can be tedious and error prone to manually type every variable name inside the <code>select()</code> function. Did you notice that we forgot the <code>drug</code> column ‚Äúby accident‚Äù?</p>
<p>Thankfully, the <code>select()</code> function is one of several <code>dplyr</code> functions that accept <a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html">tidy-select</a> argument modifiers (i.e., functions and operators). In this chapter, we will show you some of the tidy-select argument modifiers we regularly use, but you can always type <code>?dplyr_tidy_select</code> into your console to see a complete list.</p>
<p>In our little example above, we could have used the tidy-select <code>everything()</code> function to make our code easier to write and we wouldn‚Äôt have accidently missed the <code>drug</code> column. We can do so like this:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 8
      id  year   age drug    se_headache se_diarrhea se_dry_mouth    mi
   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;
 1     1     0    65 Active            0           1            1     0
 2     1     1    65 Active            1           1            1     0
 3     1     2    65 Active            1           1            0     0
 4     2     0    49 Active            1           1            1     0
 5     2     1    49 Active            0           0            1     0
 6     2     2    49 Active            1           1            1     0
 7     3     0    48 Placebo           0           0            0     0
 8     3     1    48 Placebo           0           0            0     0
 9     3     2    48 Placebo           0           0            0     0
10     4     0    37 Placebo           0           0            0     0
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>select()</code> function to change the order of the columns in the <code>drug_trial</code> data frame so that <code>id</code> would be the first variable in the data frame when reading from left to right.</p></li>
<li><p>Rather than explicitly typing the other column names, we used the <code>everything()</code> tidy-select function. As you may have guessed, <code>everything()</code> tells R to do X (in this keep) to all the other variables not explicitly mentioned.</p></li>
</ul>
<p>For our next example, let‚Äôs go ahead and add our mean-centered age variable to our <code>drug_trial</code> data again. We did this for the first time in the last chapter, in case you missed.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 9
      id  year   age drug  se_headache se_diarrhea se_dry_mouth    mi age_center
   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
 1     1     0    65 Acti‚Ä¶           0           1            1     0       11.3
 2     1     1    65 Acti‚Ä¶           1           1            1     0       11.3
 3     1     2    65 Acti‚Ä¶           1           1            0     0       11.3
 4     2     0    49 Acti‚Ä¶           1           1            1     0       -4.7
 5     2     1    49 Acti‚Ä¶           0           0            1     0       -4.7
 6     2     2    49 Acti‚Ä¶           1           1            1     0       -4.7
 7     3     0    48 Plac‚Ä¶           0           0            0     0       -5.7
 8     3     1    48 Plac‚Ä¶           0           0            0     0       -5.7
 9     3     2    48 Plac‚Ä¶           0           0            0     0       -5.7
10     4     0    37 Plac‚Ä¶           0           0            0     0      -16.7
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>One way we will often use <code>select()</code> is for performing quick little <strong>data checks</strong>. For example, let‚Äôs say that we wanted to make sure the code we wrote above actually <em>did</em> what we <em>intended</em> it to do. If we print the entire data frame to the screen, <code>age</code> and <code>age_center</code> aren‚Äôt directly side-by-side, and there‚Äôs a lot of other visual clutter from the other variables. In a case like this, we would use <code>select()</code> to get a clearer picture:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 2
     age age_center
   &lt;int&gt;      &lt;dbl&gt;
 1    65       11.3
 2    65       11.3
 3    65       11.3
 4    49       -4.7
 5    49       -4.7
 6    49       -4.7
 7    48       -5.7
 8    48       -5.7
 9    48       -5.7
10    37      -16.7
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>select()</code> function to view the <code>age</code> and <code>age_center</code> columns <em>only</em>.</p></li>
<li><p>we can type individual column names, separated by commas, into <code>select()</code> to return a data frame containing only those columns, and in that order.</p></li>
</ul>
<p class="warning">
‚ö†Ô∏è<strong>Warning:</strong> Notice that we didn‚Äôt assign our result above to anything (i.e., there‚Äôs no <code>drug_trial &lt;-</code>). If we had done so, the <code>drug_trial</code> data would have contained these two columns only. We didn‚Äôt want to drop the other columns. We could have assigned the result of the code to a different R object (e.g., <code>check_age &lt;-</code>, but it wasn‚Äôt really necessary. We just wanted to quickly view <code>age</code> and <code>age_center</code> side-by-side for data checking purposes. When we‚Äôre satisfied that we coded it correctly, we can move on. There‚Äôs no need to save those results to an R object.
</p>
<p>You may also recall that we wanted to subset the <code>drug_trial</code> data to include only the columns we needed for the rowwise demonstrations. Here is the code we used to do so:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 5
      id  year se_headache se_diarrhea se_dry_mouth
   &lt;int&gt; &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt;
 1     1     0           0           1            1
 2     1     1           1           1            1
 3     1     2           1           1            0
 4     2     0           1           1            1
 5     2     1           0           0            1
 6     2     2           1           1            1
 7     3     0           0           0            0
 8     3     1           0           0            0
 9     3     2           0           0            0
10     4     0           0           0            0
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>select()</code> function to view the <code>id</code> <code>year</code>, <code>se_headache</code>, <code>se_diarrhea</code>, and <code>se_dry_mouth</code> columns <em>only</em>.</p></li>
<li><p>we used the tidy-select <code>starts_with()</code> function to select all the side effect variables.</p></li>
</ul>
<p>we already know that we can use <code>everything()</code> to select <em>all</em> of the other variables in a data frame, but what if we just want to grab a <em>range</em> or <em>group</em> of other variables in a data frame? tidy-select makes it easy for us. Above, we used the <code>starts_with()</code> function to select all the columns with names that literally start with the letters ‚Äúse‚Äù. Because all of the side effect columns are directly next to each other (i.e., no columns in between them) we could have also used the colon operator <code>:</code> like this:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 5
      id  year se_headache se_diarrhea se_dry_mouth
   &lt;int&gt; &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt;
 1     1     0           0           1            1
 2     1     1           1           1            1
 3     1     2           1           1            0
 4     2     0           1           1            1
 5     2     1           0           0            1
 6     2     2           1           1            1
 7     3     0           0           0            0
 8     3     1           0           0            0
 9     3     2           0           0            0
10     4     0           0           0            0
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>While either method gets us the same result, we tend to prefer using <code>starts_with()</code> when possible. We think it makes your code easier to read (i.e., ‚ÄúOh, he‚Äôs selecting all the side effect columns here.‚Äù).</p>
<p>In addition to <code>starts_with()</code>, there is also an <code>ends_with()</code> tidy-select function that can also be useful. For example, we‚Äôve named factors with the <code>_f</code> naming convention throughout the book. We could use that, along with the <code>ends-with()</code> function to create a subset of our data that includes only the factor versions of our side effects columns.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 5
      id  year se_headache_f se_diarrhea_f se_dry_mouth_f
   &lt;int&gt; &lt;int&gt; &lt;fct&gt;         &lt;fct&gt;         &lt;fct&gt;         
 1     1     0 No            Yes           Yes           
 2     1     1 Yes           Yes           Yes           
 3     1     2 Yes           Yes           No            
 4     2     0 Yes           Yes           Yes           
 5     2     1 No            No            Yes           
 6     2     2 Yes           Yes           Yes           
 7     3     0 No            No            No            
 8     3     1 No            No            No            
 9     3     2 No            No            No            
10     4     0 No            No            No            
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>üóí<strong>Side Note:</strong> Variable names are important! Throughout this book, I‚Äôve tried to repeatedly emphasize the importance of coding style ‚Äì including the way we name our R objects. Many people who are new to data management and analysis (and some who aren‚Äôt, <strong>MDL</strong>) don‚Äôt fully appreciate the importance of such things. We hope that the preceding two examples are helping you to see why the little details, like variable names, are important. Using consistent variable naming conventions, for example, allows us to write code that requires less typing, is easier for humans to skim and understand, and is less prone to typos and other related errors.</p>
</div>
</div>
<p>we can also select columns we want to keep by position instead of name. We don‚Äôt do this often. We think it‚Äôs generally better to use column names or tidy-select argument modifiers when subsetting columns in your data frame. However, we do sometimes select columns by position when we‚Äôre writing our own functions. Therefore, we want to quickly show you what this looks like:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 3
      id  year drug   
   &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
 1     1     0 Active 
 2     1     1 Active 
 3     1     2 Active 
 4     2     0 Active 
 5     2     1 Active 
 6     2     2 Active 
 7     3     0 Placebo
 8     3     1 Placebo
 9     3     2 Placebo
10     4     0 Placebo
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li>we passed column numbers to the <code>select()</code> function to keep the 1st, 2nd, and 4th columns from our <code>drug_trial</code> data frame.</li>
</ul>
<p>Finally, in addition to using <code>select()</code> to <em>keep</em> columns in our data frame, we can also use <code>select()</code> to explicitly <em>drop</em> columns from our data frame. To do so, we just need to use either the subtraction symbol (<code>-</code>) or the Not operator (<code>!</code>).</p>
<p>Think back to our example from the previous chapter. There we created some new variables that captured information about participants reporting <em>any</em> and <em>all</em> side effects. During that process we created a column that contained a count of the side effects experienced in each year ‚Äì <code>n_se_year</code>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 6
      id  year n_se_year any_se_year all_se_year any_se
   &lt;int&gt; &lt;int&gt;     &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt; 
 1     1     0         2 TRUE        FALSE       TRUE  
 2     1     1         3 TRUE        TRUE        TRUE  
 3     1     2         2 TRUE        FALSE       TRUE  
 4     2     0         3 TRUE        TRUE        TRUE  
 5     2     1         1 TRUE        FALSE       TRUE  
 6     2     2         3 TRUE        TRUE        TRUE  
 7     3     0         0 FALSE       FALSE       FALSE 
 8     3     1         0 FALSE       FALSE       FALSE 
 9     3     2         0 FALSE       FALSE       FALSE 
10     4     0         0 FALSE       FALSE       FALSE 
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>Let‚Äôs say we decided we don‚Äôt need <code>n_se_year</code> column now that we created <code>any_se_year</code>, <code>all_se_year</code>, and <code>any_se</code>. We can easily drop it from the data frame in a couple of ways:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 5
      id  year any_se_year all_se_year any_se
   &lt;int&gt; &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt; 
 1     1     0 TRUE        FALSE       TRUE  
 2     1     1 TRUE        TRUE        TRUE  
 3     1     2 TRUE        FALSE       TRUE  
 4     2     0 TRUE        TRUE        TRUE  
 5     2     1 TRUE        FALSE       TRUE  
 6     2     2 TRUE        TRUE        TRUE  
 7     3     0 FALSE       FALSE       FALSE 
 8     3     1 FALSE       FALSE       FALSE 
 9     3     2 FALSE       FALSE       FALSE 
10     4     0 FALSE       FALSE       FALSE 
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 5
      id  year any_se_year all_se_year any_se
   &lt;int&gt; &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt; 
 1     1     0 TRUE        FALSE       TRUE  
 2     1     1 TRUE        TRUE        TRUE  
 3     1     2 TRUE        FALSE       TRUE  
 4     2     0 TRUE        TRUE        TRUE  
 5     2     1 TRUE        FALSE       TRUE  
 6     2     2 TRUE        TRUE        TRUE  
 7     3     0 FALSE       FALSE       FALSE 
 8     3     1 FALSE       FALSE       FALSE 
 9     3     2 FALSE       FALSE       FALSE 
10     4     0 FALSE       FALSE       FALSE 
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>Note that we could have also dropped it indirectly by selecting everything else:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 5
      id  year any_se_year all_se_year any_se
   &lt;int&gt; &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt; 
 1     1     0 TRUE        FALSE       TRUE  
 2     1     1 TRUE        TRUE        TRUE  
 3     1     2 TRUE        FALSE       TRUE  
 4     2     0 TRUE        TRUE        TRUE  
 5     2     1 TRUE        FALSE       TRUE  
 6     2     2 TRUE        TRUE        TRUE  
 7     3     0 FALSE       FALSE       FALSE 
 8     3     1 FALSE       FALSE       FALSE 
 9     3     2 FALSE       FALSE       FALSE 
10     4     0 FALSE       FALSE       FALSE 
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>But, we think this is generally a bad idea. Not only is it more typing, but skimming through your code doesn‚Äôt really tell us (or future you) what you were trying to accomplish there.</p>
</section>
<section id="the-rename-function" class="level2" data-number="27.2">
<h2 data-number="27.2" class="anchored" data-anchor-id="the-rename-function"><span class="header-section-number">27.2</span> The rename() function</h2>
<p>Sometimes, we want to change the names of some, or all, of the columns in our data frame. For me, this most commonly comes up with data I‚Äôve imported from someone else. For example, let‚Äôs say I‚Äôm importing data that uses column names that aren‚Äôt super informative. We saw column names like that when we imported NHANES data. It looked something like this:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
   SEQN ALQ101 ALQ110
  &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1     1      1      2
2     2      2      2
3     3      1      2
4     4      2      1</code></pre>
</div>
</div>
<p>we previously learned how to change these column names on import (i.e., <code>col_names</code>), but let‚Äôs say we didn‚Äôt do that for whatever reason. We can rename columns in our data frame using the <code>rename()</code> function like so:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
     id drinks_12_year drinks_12_life
  &lt;int&gt;          &lt;dbl&gt;          &lt;dbl&gt;
1     1              1              2
2     2              2              2
3     3              1              2
4     4              2              1</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>rename()</code> function to change the name of each column in the <code>drug_trial</code> data frame to be more informative.</p></li>
<li><p>You can type <code>?rename</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>rename()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% rename()</code>).</p></li>
<li><p>The second argument to the <code>rename()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should be a name value pair, or series of name-value pairs separated by columns. The name-value pairs should be in the format <code>new name = original name</code>.</p></li>
</ul>
<p>we think these names are much better, but for the sake of argument let‚Äôs say that we wanted to keep the original names ‚Äì just coerce them to lowercase. We can do that using the <code>rename_with()</code> variation of the <code>rename()</code> function in combination with the <code>tolower()</code> function:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
   seqn alq101 alq110
  &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1     1      1      2
2     2      2      2
3     3      1      2
4     4      2      1</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>rename_with()</code> function to coerce all column names in the <code>drug_trial</code> data frame to lowercase.</p></li>
<li><p>You can type <code>?rename</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>rename_with()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% rename_with()</code>).</p></li>
<li><p>The second argument to the <code>rename_with()</code> function is <code>.fn</code>. The value passed to the <code>.fn</code> argument should be a function that you want to apply to all the columns selected in the <code>.cols</code> argument (see below).</p></li>
<li><p>The third argument to the <code>rename_with()</code> function is <code>.cols</code>. The value passed to the <code>.cols</code> argument should be the columns you want to apply the function passed to the <code>.fn</code> argument to. You can select the columns using tidy-select argument modifiers.</p></li>
</ul>
</section>
<section id="the-filter-function" class="level2" data-number="27.3">
<h2 data-number="27.3" class="anchored" data-anchor-id="the-filter-function"><span class="header-section-number">27.3</span> The filter() function</h2>
<p>we just saw how to keep and drop <em>columns</em> in our data frame using the <code>select()</code> function. We can keep and drop <em>rows</em> in our data frame using the <em>filter()</em> function or the <em>slice()</em> function.</p>
<p>Similar to selecting columns by position instead of name:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 60 √ó 3
      id  year drug   
   &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
 1     1     0 Active 
 2     1     1 Active 
 3     1     2 Active 
 4     2     0 Active 
 5     2     1 Active 
 6     2     2 Active 
 7     3     0 Placebo
 8     3     1 Placebo
 9     3     2 Placebo
10     4     0 Placebo
# ‚Ñπ 50 more rows</code></pre>
</div>
</div>
<p>we can also select rows we want to keep by position. Again, we don‚Äôt do this often, but it is sometimes useful when we‚Äôre writing our own functions. Therefore, we want to quickly show you what this looks like:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 12
     id  year   age drug   se_headache se_diarrhea se_dry_mouth    mi age_center
  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;        &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
1     1     0    65 Active           0           1            1     0       11.3
2     1     1    65 Active           1           1            1     0       11.3
3     1     2    65 Active           1           1            0     0       11.3
4     2     0    49 Active           1           1            1     0       -4.7
5     2     1    49 Active           0           0            1     0       -4.7
# ‚Ñπ 3 more variables: se_headache_f &lt;fct&gt;, se_diarrhea_f &lt;fct&gt;,
#   se_dry_mouth_f &lt;fct&gt;</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>slice()</code> function to keep only the first 5 rows in the <code>drug_trial</code> data frame.</p></li>
<li><p>You can type <code>?slice</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>slice()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% slice()</code>).</p></li>
<li><p>The second argument to the <code>slice()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should be a row numbers you want returned to you.</p></li>
</ul>
<p>Generally speaking, we‚Äôre far more likely to use the <code>filter()</code> function to select only a subset of rows from our data frame. Two of the most common scenarios, of many possible scenarios, where want to subset rows include:</p>
<ul>
<li><p>Performing a subgroup analysis. This is a situation where we want our analysis to include only some of the people (or places, or things) in our data frame.</p></li>
<li><p>Performing a complete case analysis. This is a situation where we want to remove rows that contain missing values from our data frame before performing an analysis.</p></li>
</ul>
<section id="subgroup-analysis" class="level3" data-number="27.3.1">
<h3 data-number="27.3.1" class="anchored" data-anchor-id="subgroup-analysis"><span class="header-section-number">27.3.1</span> Subgroup analysis</h3>
<p>Let‚Äôs say that we want to count the number of people in the drug trial who reported having headaches in the baseline year by drug status (active vs.&nbsp;placebo). We would first use <code>filter()</code> to keep only the rows that contain data from the baseline year:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 √ó 12
      id  year   age drug  se_headache se_diarrhea se_dry_mouth    mi age_center
   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
 1     1     0    65 Acti‚Ä¶           0           1            1     0     11.3  
 2     2     0    49 Acti‚Ä¶           1           1            1     0     -4.7  
 3     3     0    48 Plac‚Ä¶           0           0            0     0     -5.7  
 4     4     0    37 Plac‚Ä¶           0           0            0     0    -16.7  
 5     5     0    71 Plac‚Ä¶           0           0            0     0     17.3  
 6     6     0    48 Plac‚Ä¶           0           0            0     0     -5.7  
 7     7     0    59 Acti‚Ä¶           1           1            1     0      5.3  
 8     8     0    60 Plac‚Ä¶           0           0            0     0      6.3  
 9     9     0    61 Acti‚Ä¶           1           1            1     0      7.3  
10    10     0    39 Acti‚Ä¶           1           0            1     0    -14.7  
11    11     0    61 Plac‚Ä¶           0           0            0     0      7.3  
12    12     0    62 Plac‚Ä¶           1           0            1     0      8.3  
13    13     0    43 Plac‚Ä¶           0           0            0     0    -10.7  
14    14     0    63 Plac‚Ä¶           0           0            0     0      9.3  
15    15     0    69 Acti‚Ä¶           1           1            1     0     15.3  
16    16     0    42 Plac‚Ä¶           0           0            0     0    -11.7  
17    17     0    60 Plac‚Ä¶           0           0            0     0      6.3  
18    18     0    41 Acti‚Ä¶           1           1            1     0    -12.7  
19    19     0    43 Plac‚Ä¶           0           0            0     0    -10.7  
20    20     0    53 Plac‚Ä¶           0           0            0     0     -0.700
# ‚Ñπ 3 more variables: se_headache_f &lt;fct&gt;, se_diarrhea_f &lt;fct&gt;,
#   se_dry_mouth_f &lt;fct&gt;</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>filter()</code> function to keep only the rows in the <code>drug_trial</code> data frame that contain data from the baseline year.</p></li>
<li><p>You can type <code>?filter</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>filter()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% filter()</code>).</p></li>
<li><p>The second argument to the <code>filter()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should be a name-value pair or multiple name value pairs separated by commas. The <code>...</code> argument is where you will tell <code>filter()</code> how to decide which rows to keep.</p></li>
</ul>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>‚ö†Ô∏è<strong>Warning:</strong> Remember, that in the R language <code>=</code> (i.e., one equal sign) and <code>==</code> (i.e., two equal signs) are different things. The <code>=</code> operator <em>tells</em> R to <em>make</em> the thing on the left equal to the thing on the right. In other words, it <em>assigns</em> values. The <code>==</code> <em>asks</em> R if the thing on the left is equal to the thing on the right. In other words, it <em>test the equality</em> of values.</p>
</div>
</div>
<p>Now, we can use the descriptive analysis techniques we‚Äôve already learned to answer our research question:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
# Groups:   drug [2]
  drug    se_headache_f     n
  &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt;
1 Active  No                1
2 Active  Yes               6
3 Placebo No               12
4 Placebo Yes               1</code></pre>
</div>
</div>
<p>So, 6 out of 7 (~ 86%) of the people in our active drug group reported headaches in the baseline year. Now, let‚Äôs say that we have reason to suspect that the drug affects people differently based on their age. Let‚Äôs go ahead and repeat this analysis, but only in a subgroup of people who are below age 65. Again, we can use the <code>filter()</code> function to do this:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
# Groups:   drug [2]
  drug    se_headache_f     n
  &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt;
1 Active  Yes               5
2 Placebo No               11
3 Placebo Yes               1</code></pre>
</div>
</div>
<p>Wow! It looks like everyone under age 65 who received active drug also reported headaches!</p>
<p>we can show this more explicitly by using passing the value <code>FALSE</code> to the <code>.drop</code> argument of <code>group_by()</code>. This tells R to keep all factor levels in the output, even if they were <em>observed</em> in the data zero times.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
# Groups:   drug [2]
  drug    se_headache_f     n
  &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt;
1 Active  No                0
2 Active  Yes               5
3 Placebo No               11
4 Placebo Yes               1</code></pre>
</div>
</div>
<p>Finally, we could make our code above more succinct by combining our two filter functions into one:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
# Groups:   drug [2]
  drug    se_headache_f     n
  &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt;
1 Active  No                0
2 Active  Yes               5
3 Placebo No               11
4 Placebo Yes               1</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li>we used the <code>filter()</code> function to keep only the rows in the <code>drug_trial</code> data frame that contain data from the baseline year <em>AND</em> (<code>&amp;</code>) contain data from rows with a value that is less than 65 in the <code>age</code> column. The <em>AND</em> (<code>&amp;</code>) here is important. A row must satisfy both of these conditions in order for R to keep it in the returned data frame. If we had used <em>OR</em> instead (<code>filter(year == 0 | age &lt; 65)</code>), then only one condition <em>OR</em> the other would need to be met for R to keep the row in the returned data frame.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>üóí<strong>Side Note:</strong> In the R language, we use the pipe operator to create <em>OR</em> conditions. The pipe operator looks like <code>|</code> and is probably the key immediately to the right of your enter/return key on your keyboard.</p>
</div>
</div>
</section>
<section id="complete-case-analysis" class="level3" data-number="27.3.2">
<h3 data-number="27.3.2" class="anchored" data-anchor-id="complete-case-analysis"><span class="header-section-number">27.3.2</span> Complete case analysis</h3>
<p>Now let‚Äôs say that we want to compare age at baseline by drug status (active vs.&nbsp;placebo). Additionally, let‚Äôs say that we have some missing values in our data.</p>
<p>Let‚Äôs first simulate some new data with missing values:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 12
      id  year   age drug  se_headache se_diarrhea se_dry_mouth    mi age_center
   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
 1     1     0    NA Acti‚Ä¶           0           1            1     0       11.3
 2     2     0    49 Acti‚Ä¶           1           1            1     0       -4.7
 3     3     0    48 Plac‚Ä¶           0           0            0     0       -5.7
 4     4     0    37 &lt;NA&gt;            0           0            0     0      -16.7
 5     5     0    71 Plac‚Ä¶           0           0            0     0       17.3
 6     6     0    48 Plac‚Ä¶           0           0            0     0       -5.7
 7     7     0    59 Acti‚Ä¶           1           1            1     0        5.3
 8     8     0    60 Plac‚Ä¶           0           0            0     0        6.3
 9     9     0    61 Acti‚Ä¶           1           1            1     0        7.3
10    10     0    39 Acti‚Ä¶           1           0            1     0      -14.7
# ‚Ñπ 3 more variables: se_headache_f &lt;fct&gt;, se_diarrhea_f &lt;fct&gt;,
#   se_dry_mouth_f &lt;fct&gt;</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>filter()</code> and <code>slice()</code> functions to create a new data frame that contains only a subset of our original <code>drug_trial</code> data frame. The subset includes only the first 10 rows of the data frame remaining after selecting only the baseline year rows from the original data frame.</p></li>
<li><p>we used the <code>replace()</code> function to replace the first value of age with <code>NA</code> and the fourth value of <code>drug</code> with <code>NA</code>.</p></li>
<li><p>You can type <code>?replace</code> into your R console to view the help documentation for this function.</p></li>
</ul>
<p>If we try to answer our research question above without dealing with the missing data, we get the following undesirable results:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  drug    mean_age
  &lt;chr&gt;      &lt;dbl&gt;
1 Active      NA  
2 Placebo     56.8
3 &lt;NA&gt;        37  </code></pre>
</div>
</div>
<p>One way we can improve our result is by adding the <code>na.rm</code> argument to the <code>mean()</code> function.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  drug    mean_age
  &lt;chr&gt;      &lt;dbl&gt;
1 Active      52  
2 Placebo     56.8
3 &lt;NA&gt;        37  </code></pre>
</div>
</div>
<p>But, we previously saw how it can sometimes be more efficient to drop the row with missing data from the data frame explicitly. This is called a <strong>complete case analysis</strong> or <strong>list-wise deletion</strong>.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  drug    mean_age
  &lt;chr&gt;      &lt;dbl&gt;
1 Active      52  
2 Placebo     56.8
3 &lt;NA&gt;        37  </code></pre>
</div>
</div>
<p>However, we still have that missing value for <code>drug</code>. We can easily drop the row with the missing value by adding an additional value to the <code>...</code> argument of our <code>filter()</code> function:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  drug    mean_age
  &lt;chr&gt;      &lt;dbl&gt;
1 Active      52  
2 Placebo     56.8</code></pre>
</div>
</div>
</section>
</section>
<section id="deduplication" class="level2" data-number="27.4">
<h2 data-number="27.4" class="anchored" data-anchor-id="deduplication"><span class="header-section-number">27.4</span> Deduplication</h2>
<p>Another common data management task that we want to discuss in this chapter is deduplicating data. Let‚Äôs go ahead and simulate some data to illustrate what we mean:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 3
      id   day     x
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1     1     1
 2     1     2    11
 3     2     1    12
 4     2     2    13
 5     2     2    14
 6     3     1    12
 7     3     1    12
 8     3     2    13
 9     4     1    13
10     5     1    10
11     5     2    11
12     5     1    10</code></pre>
</div>
</div>
<ul>
<li><p>All id‚Äôs but 4 have multiple observations.</p></li>
<li><p>ID 2 has row with duplicate values for <code>id</code> and <code>day</code>, but a non-duplicate value for <code>x</code>. These rows are partial duplicates.</p></li>
<li><p>ID 3 has a row with duplicate values for all three columns (i.e., <code>3, 1, 12</code>). These rows are complete duplicates.</p></li>
<li><p>ID 5 has a row with duplicate values for all three columns (i.e., <code>5, 1, 10</code>). These rows are complete duplicates. However, they are not in sequential order in the dataset.</p></li>
</ul>
<section id="the-distinct-function" class="level3" data-number="27.4.1">
<h3 data-number="27.4.1" class="anchored" data-anchor-id="the-distinct-function"><span class="header-section-number">27.4.1</span> The distinct() function</h3>
<p>we can use <code>dplyr</code>‚Äôs <code>distinct()</code> function to remove all complete duplicates from the data frame:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 √ó 3
      id   day     x
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1     1     1
 2     1     2    11
 3     2     1    12
 4     2     2    13
 5     2     2    14
 6     3     1    12
 7     3     2    13
 8     4     1    13
 9     5     1    10
10     5     2    11</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>distinct()</code> function to keep only one row from a group of complete duplicate rows in the <code>df</code> data frame.</p></li>
<li><p>You can type <code>?distinct</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>distinct()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% distinct()</code>).</p></li>
<li><p>The second argument to the <code>distinct()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should be the variables to use when determining uniqueness. Passing no variables to the <code>...</code> argument is equivalent to pass all variables to the <code>...</code> argument.</p></li>
</ul>
</section>
<section id="complete-duplicate-row-add-tag" class="level3" data-number="27.4.2">
<h3 data-number="27.4.2" class="anchored" data-anchor-id="complete-duplicate-row-add-tag"><span class="header-section-number">27.4.2</span> Complete duplicate row add tag</h3>
<p>If want to identify the complete duplicate rows, without immediately dropping them, we can use the <code>duplicated()</code> function inside the <code>mutate()</code> function. This creates a new column in our data frame that has the value <code>TRUE</code> when the row is a complete duplicate and the value <code>FALSE</code> otherwise.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
      id   day     x dup  
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;
 1     1     1     1 FALSE
 2     1     2    11 FALSE
 3     2     1    12 FALSE
 4     2     2    13 FALSE
 5     2     2    14 FALSE
 6     3     1    12 FALSE
 7     3     1    12 TRUE 
 8     3     2    13 FALSE
 9     4     1    13 FALSE
10     5     1    10 FALSE
11     5     2    11 FALSE
12     5     1    10 TRUE </code></pre>
</div>
</div>
<p>Alternatively, we could get the same result using:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 5
# Groups:   id, day, x [10]
      id   day     x n_row dup  
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;lgl&gt;
 1     1     1     1     1 FALSE
 2     1     2    11     1 FALSE
 3     2     1    12     1 FALSE
 4     2     2    13     1 FALSE
 5     2     2    14     1 FALSE
 6     3     1    12     1 FALSE
 7     3     1    12     2 TRUE 
 8     3     2    13     1 FALSE
 9     4     1    13     1 FALSE
10     5     1    10     1 FALSE
11     5     2    11     1 FALSE
12     5     1    10     2 TRUE </code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>group_by_all()</code> function to split our data frame into multiple data frames grouped by all the columns in <code>df</code>.</p></li>
<li><p>we used the <code>row_number()</code> to sequentially count every row in each of the little data frames created by <code>group_by_all()</code>. We assigned the sequential count to a new column named <code>n_row</code>.</p></li>
<li><p>we created a new column named <code>dup</code> that has a value of <code>TRUE</code> when the value of <code>n_row</code> is greater than 1 and <code>FALSE</code> otherwise.</p></li>
</ul>
<p>Notice that R only tags the second in a set of duplicate rows as a duplicate. Below we tag both rows with complete duplicate values.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
      id   day     x dup  
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;
 1     1     1     1 FALSE
 2     1     2    11 FALSE
 3     2     1    12 FALSE
 4     2     2    13 FALSE
 5     2     2    14 FALSE
 6     3     1    12 TRUE 
 7     3     1    12 TRUE 
 8     3     2    13 FALSE
 9     4     1    13 FALSE
10     5     1    10 TRUE 
11     5     2    11 FALSE
12     5     1    10 TRUE </code></pre>
</div>
</div>
</section>
<section id="partial-duplicate-rows" class="level3" data-number="27.4.3">
<h3 data-number="27.4.3" class="anchored" data-anchor-id="partial-duplicate-rows"><span class="header-section-number">27.4.3</span> Partial duplicate rows</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 √ó 3
     id   day     x
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1     1     1
2     1     2    11
3     2     1    12
4     2     2    13
5     3     1    12
6     3     2    13
7     4     1    13
8     5     1    10
9     5     2    11</code></pre>
</div>
</div>
<p>üëÜ<strong>Here‚Äôs what we did above:</strong></p>
<ul>
<li><p>we used the <code>distinct()</code> function to keep only one row from a group of duplicate rows in the <code>df</code> data frame.</p></li>
<li><p>You can type <code>?distinct</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>This time we passed the column names <code>id</code> and <code>day</code> to the <code>...</code> argument. This tells R to consider any rows that have the same value of <code>id</code> <em>AND</em> <code>day</code> to be duplicates ‚Äì even if they have different values in their other columns.</p></li>
<li><p>The <code>.keep_all</code> argument tells R to return all of the columns in <code>df</code> to us ‚Äì not just the columns that we are testing for uniqueness (i.e., <code>id</code> and <code>day</code>).</p></li>
</ul>
</section>
<section id="partial-duplicate-rows---add-tag" class="level3" data-number="27.4.4">
<h3 data-number="27.4.4" class="anchored" data-anchor-id="partial-duplicate-rows---add-tag"><span class="header-section-number">27.4.4</span> Partial duplicate rows - add tag</h3>
<p>we can tag partial duplicate rows in a similar fashion to the way we tagged complete duplicate rows above:</p>
<p>#| echo: false #| rows-print: 12 df %&gt;% group_by(id, day) %&gt;% mutate( count = row_number(), # Counts rows by group dup = count &gt; 1 # TRUE if there is more than one row per group )</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/brad-cannell\.github\.io\/r4epi_quarto\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../chapters/creating_and_modifying_columns/creating_and_modifying_columns.html" class="pagination-link" aria-label="Creating and Modifying Columns">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Creating and Modifying Columns</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../chapters/working_with_dates/working_with_dates.html" class="pagination-link" aria-label="Working with Dates">
        <span class="nav-page-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Working with Dates</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>R for Epidemiology</p>
</div>   
    <div class="nav-footer-center">

<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/brad-cannell/r4epi_quarto/edit/main/chapters/subsetting_data_frames/subsetting_data_frames.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/brad-cannell/r4epi_quarto/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://Quarto/.org/">Quarto/</a>.</p>
</div>
  </div>
</footer>




</body></html>