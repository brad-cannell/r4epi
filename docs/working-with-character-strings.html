<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>29 Working with character strings | R for Epidemiology</title>
  <meta name="description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="29 Working with character strings | R for Epidemiology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r4epi/" />
  <meta property="og:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />
  <meta property="og:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="github-repo" content="brad-cannell/r4epi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="29 Working with character strings | R for Epidemiology" />
  
  <meta name="twitter:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="twitter:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2022-07-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-dates.html"/>
<link rel="next" href="conditional-operations.html"/>
<script src="libs/header-attrs-2.14/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0RREBTQ0D9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0RREBTQ0D9');
</script>
<!-- R4Epi Favicons -->
<!-- https://bookdown.org/yihui/rmarkdown-cookbook/favicon.html -->
<!-- Also using Favicon Generator (https://realfavicongenerator.net) -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Epidemiology</a></li>

<li class="divider"></li>
<li><a href="index.html#welcome">Welcome<span></span></a>
<ul>
<li><a href="index.html#acknowledgements">Acknowledgements<span></span></a></li>
</ul></li>
<li><a href="introduction.html#introduction">Introduction<span></span></a>
<ul>
<li><a href="introduction.html#goals">Goals<span></span></a></li>
<li><a href="introduction.html#text-conventions-used-in-this-book">Text conventions used in this book<span></span></a></li>
<li><a href="introduction.html#other-reading">Other reading<span></span></a></li>
<li><a href="introduction.html#contributing-to-r4epi">Contributing to R4Epi<span></span></a>
<ul>
<li><a href="introduction.html#typos">Typos<span></span></a></li>
<li><a href="introduction.html#issues">Issues<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="about-the-authors.html#about-the-authors">About the Authors<span></span></a>
<ul>
<li><a href="about-the-authors.html#brad-cannell">Brad Cannell<span></span></a></li>
<li><a href="about-the-authors.html#melvin-livingston">Melvin Livingston<span></span></a></li>
</ul></li>
<li class="part"><span><b>I Getting Started<span></span></b></span></li>
<li class="chapter" data-level="1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-mac"><i class="fa fa-check"></i><b>1.1</b> Download and install on a Mac<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-pc"><i class="fa fa-check"></i><b>1.2</b> Download and install on a PC<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>2</b> What is R?<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="what-is-r.html"><a href="what-is-r.html#what-is-data"><i class="fa fa-check"></i><b>2.1</b> What is data?<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="what-is-r.html"><a href="what-is-r.html#what-is-r-1"><i class="fa fa-check"></i><b>2.2</b> What is R?<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="what-is-r.html"><a href="what-is-r.html#transferring-data"><i class="fa fa-check"></i><b>2.2.1</b> Transferring data<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="what-is-r.html"><a href="what-is-r.html#managing-data"><i class="fa fa-check"></i><b>2.2.2</b> Managing data<span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="what-is-r.html"><a href="what-is-r.html#analyzing-data"><i class="fa fa-check"></i><b>2.2.3</b> Analyzing data<span></span></a></li>
<li class="chapter" data-level="2.2.4" data-path="what-is-r.html"><a href="what-is-r.html#presenting-data"><i class="fa fa-check"></i><b>2.2.4</b> Presenting data<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html"><i class="fa fa-check"></i><b>3</b> Navigating the RStudio interface<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-console"><i class="fa fa-check"></i><b>3.1</b> The console<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-environment-pane"><i class="fa fa-check"></i><b>3.2</b> The environment pane<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-files-pane"><i class="fa fa-check"></i><b>3.3</b> The files pane<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-source-pane"><i class="fa fa-check"></i><b>3.4</b> The source pane<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#rstudio-preferences"><i class="fa fa-check"></i><b>3.5</b> RStudio preferences<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html"><i class="fa fa-check"></i><b>4</b> Speaking R’s language<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#r-is-a-language"><i class="fa fa-check"></i><b>4.1</b> R is a <em>language</em><span></span></a></li>
<li class="chapter" data-level="4.2" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#the-r-interpreter"><i class="fa fa-check"></i><b>4.2</b> The R interpreter<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#errors"><i class="fa fa-check"></i><b>4.3</b> Errors<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#functions"><i class="fa fa-check"></i><b>4.4</b> Functions<span></span></a></li>
<li class="chapter" data-level="4.5" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#objects"><i class="fa fa-check"></i><b>4.5</b> Objects<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#comments"><i class="fa fa-check"></i><b>4.6</b> Comments<span></span></a></li>
<li class="chapter" data-level="4.7" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#packages"><i class="fa fa-check"></i><b>4.7</b> Packages<span></span></a></li>
<li class="chapter" data-level="4.8" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#programming-style"><i class="fa fa-check"></i><b>4.8</b> Programming style<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lets-get-programming.html"><a href="lets-get-programming.html"><i class="fa fa-check"></i><b>5</b> Let’s get programming<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#simulating-data"><i class="fa fa-check"></i><b>5.1</b> Simulating data<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vectors"><i class="fa fa-check"></i><b>5.2</b> Vectors<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vector-types"><i class="fa fa-check"></i><b>5.2.1</b> Vector types<span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#double-vectors"><i class="fa fa-check"></i><b>5.2.2</b> Double vectors<span></span></a></li>
<li class="chapter" data-level="5.2.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#integer-vectors"><i class="fa fa-check"></i><b>5.2.3</b> Integer vectors<span></span></a></li>
<li class="chapter" data-level="5.2.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#logical-vectors"><i class="fa fa-check"></i><b>5.2.4</b> Logical vectors<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#data-frames"><i class="fa fa-check"></i><b>5.3</b> Data frames<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#tibbles"><i class="fa fa-check"></i><b>5.4</b> Tibbles<span></span></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-as_tibble-function"><i class="fa fa-check"></i><b>5.4.1</b> The as_tibble function<span></span></a></li>
<li class="chapter" data-level="5.4.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tibble-function"><i class="fa fa-check"></i><b>5.4.2</b> The tibble function<span></span></a></li>
<li class="chapter" data-level="5.4.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tribble-function"><i class="fa fa-check"></i><b>5.4.3</b> The tribble function<span></span></a></li>
<li class="chapter" data-level="5.4.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#why-use-tibbles"><i class="fa fa-check"></i><b>5.4.4</b> Why use tibbles<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#missing-data"><i class="fa fa-check"></i><b>5.5</b> Missing data<span></span></a></li>
<li class="chapter" data-level="5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#our-first-analysis"><i class="fa fa-check"></i><b>5.6</b> Our first analysis<span></span></a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#manual-calculation-of-the-mean"><i class="fa fa-check"></i><b>5.6.1</b> Manual calculation of the mean<span></span></a></li>
<li class="chapter" data-level="5.6.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#dollar-sign-notation"><i class="fa fa-check"></i><b>5.6.2</b> Dollar sign notation<span></span></a></li>
<li class="chapter" data-level="5.6.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#bracket-notation"><i class="fa fa-check"></i><b>5.6.3</b> Bracket notation<span></span></a></li>
<li class="chapter" data-level="5.6.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-sum-function"><i class="fa fa-check"></i><b>5.6.4</b> The sum function<span></span></a></li>
<li class="chapter" data-level="5.6.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#nesting-functions"><i class="fa fa-check"></i><b>5.6.5</b> Nesting functions<span></span></a></li>
<li class="chapter" data-level="5.6.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-length-function"><i class="fa fa-check"></i><b>5.6.6</b> The length function<span></span></a></li>
<li class="chapter" data-level="5.6.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-mean-function"><i class="fa fa-check"></i><b>5.6.7</b> The mean function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#some-common-errors"><i class="fa fa-check"></i><b>5.7</b> Some common errors<span></span></a></li>
<li class="chapter" data-level="5.8" data-path="lets-get-programming.html"><a href="lets-get-programming.html#summary"><i class="fa fa-check"></i><b>5.8</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="asking-questions.html"><a href="asking-questions.html"><i class="fa fa-check"></i><b>6</b> Asking questions<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="asking-questions.html"><a href="asking-questions.html#when-should-we-seek-help"><i class="fa fa-check"></i><b>6.1</b> When should we seek help?<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="asking-questions.html"><a href="asking-questions.html#where-should-we-seek-help"><i class="fa fa-check"></i><b>6.2</b> Where should we seek help?<span></span></a></li>
<li class="chapter" data-level="6.3" data-path="asking-questions.html"><a href="asking-questions.html#how-should-we-seek-help"><i class="fa fa-check"></i><b>6.3</b> How should we seek help?<span></span></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="asking-questions.html"><a href="asking-questions.html#creating-a-post-on-stack-overflow"><i class="fa fa-check"></i><b>6.3.1</b> Creating a post on Stack Overflow<span></span></a></li>
<li class="chapter" data-level="6.3.2" data-path="asking-questions.html"><a href="asking-questions.html#creating-better-posts-and-asking-better-questions"><i class="fa fa-check"></i><b>6.3.2</b> Creating better posts and asking better questions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="asking-questions.html"><a href="asking-questions.html#helping-others"><i class="fa fa-check"></i><b>6.4</b> Helping others<span></span></a></li>
<li class="chapter" data-level="6.5" data-path="asking-questions.html"><a href="asking-questions.html#summary-1"><i class="fa fa-check"></i><b>6.5</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>II Coding Tools and Best Practices<span></span></b></span></li>
<li class="chapter" data-level="7" data-path="r-scripts.html"><a href="r-scripts.html"><i class="fa fa-check"></i><b>7</b> R scripts<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-scripts.html"><a href="r-scripts.html#creating-r-scripts"><i class="fa fa-check"></i><b>7.1</b> Creating R scripts<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R markdown<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>8.1</b> What is R markdown?<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="r-markdown.html"><a href="r-markdown.html#why-use-r-markdown"><i class="fa fa-check"></i><b>8.2</b> Why use R markdown?<span></span></a></li>
<li class="chapter" data-level="8.3" data-path="r-markdown.html"><a href="r-markdown.html#create-an-r-notebook"><i class="fa fa-check"></i><b>8.3</b> Create an R Notebook<span></span></a></li>
<li class="chapter" data-level="8.4" data-path="r-markdown.html"><a href="r-markdown.html#yaml-headers"><i class="fa fa-check"></i><b>8.4</b> YAML headers<span></span></a></li>
<li class="chapter" data-level="8.5" data-path="r-markdown.html"><a href="r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>8.5</b> R code chunks<span></span></a></li>
<li class="chapter" data-level="8.6" data-path="r-markdown.html"><a href="r-markdown.html#markdown"><i class="fa fa-check"></i><b>8.6</b> Markdown<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="r-projects.html"><a href="r-projects.html"><i class="fa fa-check"></i><b>9</b> R projects<span></span></a></li>
<li class="chapter" data-level="10" data-path="coding-best-practices.html"><a href="coding-best-practices.html"><i class="fa fa-check"></i><b>10</b> Coding best practices<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#general-principles"><i class="fa fa-check"></i><b>10.1</b> General principles<span></span></a></li>
<li class="chapter" data-level="10.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#code-comments"><i class="fa fa-check"></i><b>10.2</b> Code comments<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#defining-key-variables"><i class="fa fa-check"></i><b>10.2.1</b> Defining key variables<span></span></a></li>
<li class="chapter" data-level="10.2.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#what-this-code-is-trying-to-accomplish"><i class="fa fa-check"></i><b>10.2.2</b> What this code is trying to accomplish<span></span></a></li>
<li class="chapter" data-level="10.2.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#why-i-chose-this-particular-strategy"><i class="fa fa-check"></i><b>10.2.3</b> Why I chose this particular strategy<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#style-guidelines"><i class="fa fa-check"></i><b>10.3</b> Style guidelines<span></span></a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#comments-1"><i class="fa fa-check"></i><b>10.3.1</b> Comments<span></span></a></li>
<li class="chapter" data-level="10.3.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#object-variable-names"><i class="fa fa-check"></i><b>10.3.2</b> Object (variable) names<span></span></a></li>
<li class="chapter" data-level="10.3.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#use-names-that-are-informative"><i class="fa fa-check"></i><b>10.3.3</b> Use names that are informative<span></span></a></li>
<li class="chapter" data-level="10.3.4" data-path="coding-best-practices.html"><a href="coding-best-practices.html#file-names"><i class="fa fa-check"></i><b>10.3.4</b> File Names<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="using-pipes.html"><a href="using-pipes.html"><i class="fa fa-check"></i><b>11</b> Using pipes<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="using-pipes.html"><a href="using-pipes.html#what-are-pipes"><i class="fa fa-check"></i><b>11.1</b> What are pipes?<span></span></a></li>
<li class="chapter" data-level="11.2" data-path="using-pipes.html"><a href="using-pipes.html#how-do-pipes-work"><i class="fa fa-check"></i><b>11.2</b> How do pipes work?<span></span></a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="using-pipes.html"><a href="using-pipes.html#keyboard-shortcut"><i class="fa fa-check"></i><b>11.2.1</b> Keyboard shortcut<span></span></a></li>
<li class="chapter" data-level="11.2.2" data-path="using-pipes.html"><a href="using-pipes.html#pipe-style"><i class="fa fa-check"></i><b>11.2.2</b> Pipe style<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="using-pipes.html"><a href="using-pipes.html#final-thought-on-pipes"><i class="fa fa-check"></i><b>11.3</b> Final thought on pipes<span></span></a></li>
</ul></li>
<li class="part"><span><b>III Data Transfer<span></span></b></span></li>
<li class="chapter" data-level="12" data-path="introduction-to-data-transfer.html"><a href="introduction-to-data-transfer.html"><i class="fa fa-check"></i><b>12</b> Introduction to data transfer<span></span></a></li>
<li class="chapter" data-level="13" data-path="file-paths.html"><a href="file-paths.html"><i class="fa fa-check"></i><b>13</b> File paths<span></span></a>
<ul>
<li class="chapter" data-level="13.1" data-path="file-paths.html"><a href="file-paths.html#finding-file-paths"><i class="fa fa-check"></i><b>13.1</b> Finding file paths<span></span></a></li>
<li class="chapter" data-level="13.2" data-path="file-paths.html"><a href="file-paths.html#relative-file-paths"><i class="fa fa-check"></i><b>13.2</b> Relative file paths<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html"><i class="fa fa-check"></i><b>14</b> Importing plain text files<span></span></a>
<ul>
<li class="chapter" data-level="14.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#packages-for-importing-data"><i class="fa fa-check"></i><b>14.1</b> Packages for importing data<span></span></a></li>
<li class="chapter" data-level="14.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-space-delimited-files"><i class="fa fa-check"></i><b>14.2</b> Importing space delimited files<span></span></a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#specifying-missing-data-values"><i class="fa fa-check"></i><b>14.2.1</b> Specifying missing data values<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-tab-delimited-files"><i class="fa fa-check"></i><b>14.3</b> Importing tab delimited files<span></span></a></li>
<li class="chapter" data-level="14.4" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-fixed-width-format-files"><i class="fa fa-check"></i><b>14.4</b> Importing fixed width format files<span></span></a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#vector-of-column-widths"><i class="fa fa-check"></i><b>14.4.1</b> Vector of column widths<span></span></a></li>
<li class="chapter" data-level="14.4.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#paired-vector-of-start-and-end-positions"><i class="fa fa-check"></i><b>14.4.2</b> Paired vector of start and end positions<span></span></a></li>
<li class="chapter" data-level="14.4.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#using-named-arguments"><i class="fa fa-check"></i><b>14.4.3</b> Using named arguments<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-comma-separated-values-files"><i class="fa fa-check"></i><b>14.5</b> Importing comma separated values files<span></span></a></li>
<li class="chapter" data-level="14.6" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#additional-arguments"><i class="fa fa-check"></i><b>14.6</b> Additional arguments<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="importing-binary-files.html"><a href="importing-binary-files.html"><i class="fa fa-check"></i><b>15</b> Importing binary files<span></span></a>
<ul>
<li class="chapter" data-level="15.1" data-path="importing-binary-files.html"><a href="importing-binary-files.html#packages-for-importing-data-1"><i class="fa fa-check"></i><b>15.1</b> Packages for importing data<span></span></a></li>
<li class="chapter" data-level="15.2" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-microsoft-excel-spreadsheets"><i class="fa fa-check"></i><b>15.2</b> Importing Microsoft Excel spreadsheets<span></span></a></li>
<li class="chapter" data-level="15.3" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-data-from-other-statistical-analysis-software"><i class="fa fa-check"></i><b>15.3</b> Importing data from other statistical analysis software<span></span></a></li>
<li class="chapter" data-level="15.4" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-sas-data-sets"><i class="fa fa-check"></i><b>15.4</b> Importing SAS data sets<span></span></a></li>
<li class="chapter" data-level="15.5" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-stata-data-sets"><i class="fa fa-check"></i><b>15.5</b> Importing Stata data sets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="rstudios-data-import-tool.html"><a href="rstudios-data-import-tool.html"><i class="fa fa-check"></i><b>16</b> RStudio’s data import tool<span></span></a></li>
<li class="chapter" data-level="17" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>17</b> Exporting data<span></span></a>
<ul>
<li class="chapter" data-level="17.1" data-path="exporting-data.html"><a href="exporting-data.html#plain-text-files"><i class="fa fa-check"></i><b>17.1</b> Plain text files<span></span></a></li>
<li class="chapter" data-level="17.2" data-path="exporting-data.html"><a href="exporting-data.html#r-binary-files"><i class="fa fa-check"></i><b>17.2</b> R binary files<span></span></a></li>
</ul></li>
<li class="part"><span><b>IV Descriptive Analysis<span></span></b></span></li>
<li class="chapter" data-level="18" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html"><i class="fa fa-check"></i><b>18</b> Introduction to descriptive analysis<span></span></a>
<ul>
<li class="chapter" data-level="18.1" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-is-descriptive-analysis-and-why-would-we-do-it"><i class="fa fa-check"></i><b>18.1</b> What is descriptive analysis and why would we do it?<span></span></a></li>
<li class="chapter" data-level="18.2" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-kind-of-descriptive-analysis-should-we-perform"><i class="fa fa-check"></i><b>18.2</b> What kind of descriptive analysis should we perform?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html"><i class="fa fa-check"></i><b>19</b> Numerical descriptions of categorical variables<span></span></a>
<ul>
<li class="chapter" data-level="19.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#factor-vectors"><i class="fa fa-check"></i><b>19.1</b> Factor vectors<span></span></a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-numeric-variable"><i class="fa fa-check"></i><b>19.1.1</b> Coerce a numeric variable<span></span></a></li>
<li class="chapter" data-level="19.1.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-character-variable"><i class="fa fa-check"></i><b>19.1.2</b> Coerce a character variable<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#height-and-weight-data"><i class="fa fa-check"></i><b>19.2</b> Height and Weight Data<span></span></a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#view-the-data"><i class="fa fa-check"></i><b>19.2.1</b> View the data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-frequencies"><i class="fa fa-check"></i><b>19.3</b> Calculating frequencies<span></span></a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-base-r-table-function"><i class="fa fa-check"></i><b>19.3.1</b> The base R table function<span></span></a></li>
<li class="chapter" data-level="19.3.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-gmodels-crosstable-function"><i class="fa fa-check"></i><b>19.3.2</b> The gmodels CrossTable function<span></span></a></li>
<li class="chapter" data-level="19.3.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-tidyverse-way"><i class="fa fa-check"></i><b>19.3.3</b> The tidyverse way<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-percentages"><i class="fa fa-check"></i><b>19.4</b> Calculating percentages<span></span></a></li>
<li class="chapter" data-level="19.5" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#cat-missing-data"><i class="fa fa-check"></i><b>19.5</b> Missing data<span></span></a></li>
<li class="chapter" data-level="19.6" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#formatting-results"><i class="fa fa-check"></i><b>19.6</b> Formatting results<span></span></a></li>
<li class="chapter" data-level="19.7" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#using-freqtables"><i class="fa fa-check"></i><b>19.7</b> Using freqtables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html"><i class="fa fa-check"></i><b>20</b> Measures of central tendency<span></span></a>
<ul>
<li class="chapter" data-level="20.1" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mean"><i class="fa fa-check"></i><b>20.1</b> Calculate the mean<span></span></a></li>
<li class="chapter" data-level="20.2" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-median"><i class="fa fa-check"></i><b>20.2</b> Calculate the median<span></span></a></li>
<li class="chapter" data-level="20.3" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mode"><i class="fa fa-check"></i><b>20.3</b> Calculate the mode<span></span></a></li>
<li class="chapter" data-level="20.4" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#compare-mean-median-and-mode"><i class="fa fa-check"></i><b>20.4</b> Compare mean, median, and mode<span></span></a></li>
<li class="chapter" data-level="20.5" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#data-checking"><i class="fa fa-check"></i><b>20.5</b> Data checking<span></span></a></li>
<li class="chapter" data-level="20.6" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#properties-of-mean-median-and-mode"><i class="fa fa-check"></i><b>20.6</b> Properties of mean, median, and mode<span></span></a></li>
<li class="chapter" data-level="20.7" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#na-rm"><i class="fa fa-check"></i><b>20.7</b> Missing data<span></span></a></li>
<li class="chapter" data-level="20.8" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#using-meantables"><i class="fa fa-check"></i><b>20.8</b> Using meantables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html"><i class="fa fa-check"></i><b>21</b> Measures of dispersion<span></span></a>
<ul>
<li class="chapter" data-level="21.1" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html#comparing-distributions"><i class="fa fa-check"></i><b>21.1</b> Comparing distributions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><i class="fa fa-check"></i><b>22</b> Describing the relationship between a continuous outcome and a continuous predictor<span></span></a>
<ul>
<li class="chapter" data-level="22.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#pearson-correlation-coefficient"><i class="fa fa-check"></i><b>22.1</b> Pearson Correlation Coefficient<span></span></a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#calculating-r"><i class="fa fa-check"></i><b>22.1.1</b> Calculating r<span></span></a></li>
<li class="chapter" data-level="22.1.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#correlation-intuition"><i class="fa fa-check"></i><b>22.1.2</b> Correlation intuition<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>23</b> Describing the relationship between a continuous outcome and a categorical predictor<span></span></a>
<ul>
<li class="chapter" data-level="23.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#single-predictor-and-single-outcome"><i class="fa fa-check"></i><b>23.1</b> Single predictor and single outcome<span></span></a></li>
<li class="chapter" data-level="23.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#multiple-predictors"><i class="fa fa-check"></i><b>23.2</b> Multiple predictors<span></span></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>24</b> Describing the relationship between a categorical outcome and a categorical predictor<span></span></a>
<ul>
<li class="chapter" data-level="24.1" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html#comparing-two-variables"><i class="fa fa-check"></i><b>24.1</b> Comparing two variables<span></span></a></li>
</ul></li>
<li class="part"><span><b>V Data Management<span></span></b></span></li>
<li class="chapter" data-level="25" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html"><i class="fa fa-check"></i><b>25</b> Introduction to data management<span></span></a>
<ul>
<li class="chapter" data-level="25.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#multiple-paradigms-for-data-management-in-r"><i class="fa fa-check"></i><b>25.1</b> Multiple paradigms for data management in R<span></span></a></li>
<li class="chapter" data-level="25.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-package"><i class="fa fa-check"></i><b>25.2</b> The dplyr package<span></span></a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-verbs"><i class="fa fa-check"></i><b>25.2.1</b> The dplyr verbs<span></span></a></li>
<li class="chapter" data-level="25.2.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-.data-argument"><i class="fa fa-check"></i><b>25.2.2</b> The .data argument<span></span></a></li>
<li class="chapter" data-level="25.2.3" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-argument"><i class="fa fa-check"></i><b>25.2.3</b> The … argument<span></span></a></li>
<li class="chapter" data-level="25.2.4" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#non-standard-evaluation"><i class="fa fa-check"></i><b>25.2.4</b> Non-standard evaluation<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html"><i class="fa fa-check"></i><b>26</b> Creating and modifying columns<span></span></a>
<ul>
<li class="chapter" data-level="26.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#creating-data-frames"><i class="fa fa-check"></i><b>26.1</b> Creating data frames<span></span></a></li>
<li class="chapter" data-level="26.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#dollar-sign-notation-1"><i class="fa fa-check"></i><b>26.2</b> Dollar sign notation<span></span></a></li>
<li class="chapter" data-level="26.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#bracket-notation-1"><i class="fa fa-check"></i><b>26.3</b> Bracket notation<span></span></a></li>
<li class="chapter" data-level="26.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#modify-individual-values"><i class="fa fa-check"></i><b>26.4</b> Modify individual values<span></span></a></li>
<li class="chapter" data-level="26.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#the-mutate-function"><i class="fa fa-check"></i><b>26.5</b> The mutate() function<span></span></a>
<ul>
<li class="chapter" data-level="26.5.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-a-single-column"><i class="fa fa-check"></i><b>26.5.1</b> Adding or modifying a single column<span></span></a></li>
<li class="chapter" data-level="26.5.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#recycling-rules"><i class="fa fa-check"></i><b>26.5.2</b> Recycling rules<span></span></a></li>
<li class="chapter" data-level="26.5.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#using-existing-variables-in-name-value-pairs"><i class="fa fa-check"></i><b>26.5.3</b> Using existing variables in name-value pairs<span></span></a></li>
<li class="chapter" data-level="26.5.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-multiple-columns"><i class="fa fa-check"></i><b>26.5.4</b> Adding or modifying multiple columns<span></span></a></li>
<li class="chapter" data-level="26.5.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#rowwise-mutations"><i class="fa fa-check"></i><b>26.5.5</b> Rowwise mutations<span></span></a></li>
<li class="chapter" data-level="26.5.6" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#group_by-mutations"><i class="fa fa-check"></i><b>26.5.6</b> Group_by mutations<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html"><i class="fa fa-check"></i><b>27</b> Subsetting data frames<span></span></a>
<ul>
<li class="chapter" data-level="27.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-select-function"><i class="fa fa-check"></i><b>27.1</b> The select() function<span></span></a></li>
<li class="chapter" data-level="27.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-rename-function"><i class="fa fa-check"></i><b>27.2</b> The rename() function<span></span></a></li>
<li class="chapter" data-level="27.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-filter-function"><i class="fa fa-check"></i><b>27.3</b> The filter() function<span></span></a>
<ul>
<li class="chapter" data-level="27.3.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#subgroup-analysis"><i class="fa fa-check"></i><b>27.3.1</b> Subgroup analysis<span></span></a></li>
<li class="chapter" data-level="27.3.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-case-analysis"><i class="fa fa-check"></i><b>27.3.2</b> Complete case analysis<span></span></a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#deduplication"><i class="fa fa-check"></i><b>27.4</b> Deduplication<span></span></a>
<ul>
<li class="chapter" data-level="27.4.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-distinct-function"><i class="fa fa-check"></i><b>27.4.1</b> The distinct() function<span></span></a></li>
<li class="chapter" data-level="27.4.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-duplicate-row-add-tag"><i class="fa fa-check"></i><b>27.4.2</b> Complete duplicate row add tag<span></span></a></li>
<li class="chapter" data-level="27.4.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows"><i class="fa fa-check"></i><b>27.4.3</b> Partial duplicate rows<span></span></a></li>
<li class="chapter" data-level="27.4.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows---add-tag"><i class="fa fa-check"></i><b>27.4.4</b> Partial duplicate rows - add tag<span></span></a></li>
<li class="chapter" data-level="27.4.5" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#count-the-number-of-duplicates"><i class="fa fa-check"></i><b>27.4.5</b> Count the number of duplicates<span></span></a></li>
<li class="chapter" data-level="27.4.6" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#what-to-do-about-duplicates"><i class="fa fa-check"></i><b>27.4.6</b> What to do about duplicates<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="28" data-path="working-with-dates.html"><a href="working-with-dates.html"><i class="fa fa-check"></i><b>28</b> Working with dates<span></span></a>
<ul>
<li class="chapter" data-level="28.1" data-path="working-with-dates.html"><a href="working-with-dates.html#date-vector-types"><i class="fa fa-check"></i><b>28.1</b> Date vector types<span></span></a></li>
<li class="chapter" data-level="28.2" data-path="working-with-dates.html"><a href="working-with-dates.html#dates-under-the-hood"><i class="fa fa-check"></i><b>28.2</b> Dates under the hood<span></span></a></li>
<li class="chapter" data-level="28.3" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-date-times-to-dates"><i class="fa fa-check"></i><b>28.3</b> Coercing date-times to dates<span></span></a></li>
<li class="chapter" data-level="28.4" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-character-strings-to-dates"><i class="fa fa-check"></i><b>28.4</b> Coercing character strings to dates<span></span></a></li>
<li class="chapter" data-level="28.5" data-path="working-with-dates.html"><a href="working-with-dates.html#change-the-appearance-of-dates-with-format"><i class="fa fa-check"></i><b>28.5</b> Change the appearance of dates with format()<span></span></a></li>
<li class="chapter" data-level="28.6" data-path="working-with-dates.html"><a href="working-with-dates.html#some-useful-built-in-dates"><i class="fa fa-check"></i><b>28.6</b> Some useful built-in dates<span></span></a>
<ul>
<li class="chapter" data-level="28.6.1" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date"><i class="fa fa-check"></i><b>28.6.1</b> Today’s date<span></span></a></li>
<li class="chapter" data-level="28.6.2" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date-time"><i class="fa fa-check"></i><b>28.6.2</b> Today’s date-time<span></span></a></li>
<li class="chapter" data-level="28.6.3" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-full-month-names"><i class="fa fa-check"></i><b>28.6.3</b> Character vector of full month names<span></span></a></li>
<li class="chapter" data-level="28.6.4" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-abbreviated-month-names"><i class="fa fa-check"></i><b>28.6.4</b> Character vector of abbreviated month names<span></span></a></li>
<li class="chapter" data-level="28.6.5" data-path="working-with-dates.html"><a href="working-with-dates.html#creating-a-vector-containing-a-sequence-of-dates"><i class="fa fa-check"></i><b>28.6.5</b> Creating a vector containing a sequence of dates<span></span></a></li>
</ul></li>
<li class="chapter" data-level="28.7" data-path="working-with-dates.html"><a href="working-with-dates.html#calculating-date-intervals"><i class="fa fa-check"></i><b>28.7</b> Calculating date intervals<span></span></a>
<ul>
<li class="chapter" data-level="28.7.1" data-path="working-with-dates.html"><a href="working-with-dates.html#calculate-age-as-the-difference-in-time-between-dob-and-today"><i class="fa fa-check"></i><b>28.7.1</b> Calculate age as the difference in time between dob and today<span></span></a></li>
<li class="chapter" data-level="28.7.2" data-path="working-with-dates.html"><a href="working-with-dates.html#rounding-time-intervals"><i class="fa fa-check"></i><b>28.7.2</b> Rounding time intervals<span></span></a></li>
</ul></li>
<li class="chapter" data-level="28.8" data-path="working-with-dates.html"><a href="working-with-dates.html#extracting-out-date-parts"><i class="fa fa-check"></i><b>28.8</b> Extracting out date parts<span></span></a></li>
<li class="chapter" data-level="28.9" data-path="working-with-dates.html"><a href="working-with-dates.html#sorting-dates"><i class="fa fa-check"></i><b>28.9</b> Sorting dates<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html"><i class="fa fa-check"></i><b>29</b> Working with character strings<span></span></a>
<ul>
<li class="chapter" data-level="29.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#coerce-to-lowercase"><i class="fa fa-check"></i><b>29.1</b> Coerce to lowercase<span></span></a>
<ul>
<li class="chapter" data-level="29.1.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#lowercase"><i class="fa fa-check"></i><b>29.1.1</b> Lowercase<span></span></a></li>
<li class="chapter" data-level="29.1.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#upper-case"><i class="fa fa-check"></i><b>29.1.2</b> Upper case<span></span></a></li>
<li class="chapter" data-level="29.1.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#title-case"><i class="fa fa-check"></i><b>29.1.3</b> Title case<span></span></a></li>
<li class="chapter" data-level="29.1.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#sentence-case"><i class="fa fa-check"></i><b>29.1.4</b> Sentence case<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#trim-white-space"><i class="fa fa-check"></i><b>29.2</b> Trim white space<span></span></a></li>
<li class="chapter" data-level="29.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#regular-expressions"><i class="fa fa-check"></i><b>29.3</b> Regular expressions<span></span></a>
<ul>
<li class="chapter" data-level="29.3.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-the-comma"><i class="fa fa-check"></i><b>29.3.1</b> Remove the comma<span></span></a></li>
<li class="chapter" data-level="29.3.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-middle-initial"><i class="fa fa-check"></i><b>29.3.2</b> Remove middle initial<span></span></a></li>
<li class="chapter" data-level="29.3.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-double-spaces"><i class="fa fa-check"></i><b>29.3.3</b> Remove double spaces<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#separate-values-into-component-parts"><i class="fa fa-check"></i><b>29.4</b> Separate values into component parts<span></span></a></li>
<li class="chapter" data-level="29.5" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#dummy-variables"><i class="fa fa-check"></i><b>29.5</b> Dummy variables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="conditional-operations.html"><a href="conditional-operations.html"><i class="fa fa-check"></i><b>30</b> Conditional operations<span></span></a>
<ul>
<li class="chapter" data-level="30.1" data-path="conditional-operations.html"><a href="conditional-operations.html#operands-and-operators"><i class="fa fa-check"></i><b>30.1</b> Operands and operators<span></span></a></li>
<li class="chapter" data-level="30.2" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-multiple-conditions-simultaneously"><i class="fa fa-check"></i><b>30.2</b> Testing multiple conditions simultaneously<span></span></a></li>
<li class="chapter" data-level="30.3" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-a-sequence-of-conditions"><i class="fa fa-check"></i><b>30.3</b> Testing a sequence of conditions<span></span></a></li>
<li class="chapter" data-level="30.4" data-path="conditional-operations.html"><a href="conditional-operations.html#recoding-variables"><i class="fa fa-check"></i><b>30.4</b> Recoding variables<span></span></a></li>
<li class="chapter" data-level="30.5" data-path="conditional-operations.html"><a href="conditional-operations.html#case_when-is-lazy"><i class="fa fa-check"></i><b>30.5</b> case_when() is lazy<span></span></a></li>
<li class="chapter" data-level="30.6" data-path="conditional-operations.html"><a href="conditional-operations.html#recode-missing"><i class="fa fa-check"></i><b>30.6</b> Recode missing<span></span></a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html"><i class="fa fa-check"></i><b>31</b> Working with multiple data frames<span></span></a>
<ul>
<li class="chapter" data-level="31.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-vertically-adding-rows"><i class="fa fa-check"></i><b>31.1</b> Combining data frames vertically: Adding rows<span></span></a>
<ul>
<li class="chapter" data-level="31.1.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-more-than-2-data-frames"><i class="fa fa-check"></i><b>31.1.1</b> Combining more than 2 data frames<span></span></a></li>
<li class="chapter" data-level="31.1.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#adding-rows-with-differing-columns"><i class="fa fa-check"></i><b>31.1.2</b> Adding rows with differing columns<span></span></a></li>
<li class="chapter" data-level="31.1.3" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-positions"><i class="fa fa-check"></i><b>31.1.3</b> Differing column positions<span></span></a></li>
<li class="chapter" data-level="31.1.4" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-names"><i class="fa fa-check"></i><b>31.1.4</b> Differing column names<span></span></a></li>
</ul></li>
<li class="chapter" data-level="31.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-adding-columns"><i class="fa fa-check"></i><b>31.2</b> Combining data frames horizontally: Adding columns<span></span></a>
<ul>
<li class="chapter" data-level="31.2.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-position"><i class="fa fa-check"></i><b>31.2.1</b> Combining data frames horizontally by position<span></span></a></li>
<li class="chapter" data-level="31.2.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-key-values"><i class="fa fa-check"></i><b>31.2.2</b> Combining data frames horizontally by key values<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="32" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html"><i class="fa fa-check"></i><b>32</b> Restructuring data frames<span></span></a>
<ul>
<li class="chapter" data-level="32.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-tidyr-package"><i class="fa fa-check"></i><b>32.1</b> The tidyr package<span></span></a></li>
<li class="chapter" data-level="32.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-longer"><i class="fa fa-check"></i><b>32.2</b> Pivoting longer<span></span></a>
<ul>
<li class="chapter" data-level="32.2.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_to-argument"><i class="fa fa-check"></i><b>32.2.1</b> The names_to argument<span></span></a></li>
<li class="chapter" data-level="32.2.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_prefix-argument"><i class="fa fa-check"></i><b>32.2.2</b> The names_prefix argument<span></span></a></li>
<li class="chapter" data-level="32.2.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-values_to-argument"><i class="fa fa-check"></i><b>32.2.3</b> The values_to argument<span></span></a></li>
<li class="chapter" data-level="32.2.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_transform-argument"><i class="fa fa-check"></i><b>32.2.4</b> The names_transform argument<span></span></a></li>
<li class="chapter" data-level="32.2.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-multiple-sets-of-columns"><i class="fa fa-check"></i><b>32.2.5</b> Pivoting multiple sets of columns<span></span></a></li>
<li class="chapter" data-level="32.2.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_sep-argument"><i class="fa fa-check"></i><b>32.2.6</b> The names_sep argument<span></span></a></li>
<li class="chapter" data-level="32.2.7" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-.value-special-value"><i class="fa fa-check"></i><b>32.2.7</b> The .value special value<span></span></a></li>
<li class="chapter" data-level="32.2.8" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-period"><i class="fa fa-check"></i><b>32.2.8</b> Why person-period?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-wider"><i class="fa fa-check"></i><b>32.3</b> Pivoting wider<span></span></a>
<ul>
<li class="chapter" data-level="32.3.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-level"><i class="fa fa-check"></i><b>32.3.1</b> Why person-level?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics"><i class="fa fa-check"></i><b>32.4</b> Pivoting summary statistics<span></span></a>
<ul>
<li class="chapter" data-level="32.4.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-wide-to-long"><i class="fa fa-check"></i><b>32.4.1</b> Pivoting summary statistics wide to long<span></span></a></li>
<li class="chapter" data-level="32.4.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-long-to-wide"><i class="fa fa-check"></i><b>32.4.2</b> Pivoting summary statistics long to wide<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#tidy-data"><i class="fa fa-check"></i><b>32.5</b> Tidy data<span></span></a>
<ul>
<li class="chapter" data-level="32.5.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-variable-must-have-its-own-column"><i class="fa fa-check"></i><b>32.5.1</b> Each variable must have its own column<span></span></a></li>
<li class="chapter" data-level="32.5.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-observation-must-have-its-own-row"><i class="fa fa-check"></i><b>32.5.2</b> Each observation must have its own row<span></span></a></li>
<li class="chapter" data-level="32.5.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-value-must-have-its-own-cell"><i class="fa fa-check"></i><b>32.5.3</b> Each value must have its own cell<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-complete-function"><i class="fa fa-check"></i><b>32.6</b> The complete() function<span></span></a></li>
</ul></li>
<li class="part"><span><b>VI Repeated Operations<span></span></b></span></li>
<li class="chapter" data-level="33" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html"><i class="fa fa-check"></i><b>33</b> Introduction to repeated operations<span></span></a>
<ul>
<li class="chapter" data-level="33.1" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#multiple-methods-for-repeated-operations-in-r"><i class="fa fa-check"></i><b>33.1</b> Multiple methods for repeated operations in R<span></span></a></li>
<li class="chapter" data-level="33.2" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#tidy-evaluation"><i class="fa fa-check"></i><b>33.2</b> Tidy evaluation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>34</b> Writing functions<span></span></a>
<ul>
<li class="chapter" data-level="34.1" data-path="writing-functions.html"><a href="writing-functions.html#when-to-write-functions"><i class="fa fa-check"></i><b>34.1</b> When to write functions<span></span></a></li>
<li class="chapter" data-level="34.2" data-path="writing-functions.html"><a href="writing-functions.html#how-to-write-functions"><i class="fa fa-check"></i><b>34.2</b> How to write functions<span></span></a>
<ul>
<li class="chapter" data-level="34.2.1" data-path="writing-functions.html"><a href="writing-functions.html#the-function-function"><i class="fa fa-check"></i><b>34.2.1</b> The function() function<span></span></a></li>
<li class="chapter" data-level="34.2.2" data-path="writing-functions.html"><a href="writing-functions.html#the-function-writing-process"><i class="fa fa-check"></i><b>34.2.2</b> The function writing process<span></span></a></li>
</ul></li>
<li class="chapter" data-level="34.3" data-path="writing-functions.html"><a href="writing-functions.html#giving-your-function-arguments-default-values"><i class="fa fa-check"></i><b>34.3</b> Giving your function arguments default values<span></span></a></li>
<li class="chapter" data-level="34.4" data-path="writing-functions.html"><a href="writing-functions.html#the-values-your-functions-return"><i class="fa fa-check"></i><b>34.4</b> The values your functions return<span></span></a></li>
<li class="chapter" data-level="34.5" data-path="writing-functions.html"><a href="writing-functions.html#lexical-scoping-and-functions"><i class="fa fa-check"></i><b>34.5</b> Lexical scoping and functions<span></span></a></li>
<li class="chapter" data-level="34.6" data-path="writing-functions.html"><a href="writing-functions.html#tidy-evaluation-1"><i class="fa fa-check"></i><b>34.6</b> Tidy evaluation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html"><i class="fa fa-check"></i><b>35</b> Column-wise operations in dplyr<span></span></a>
<ul>
<li class="chapter" data-level="35.1" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#the-across-function"><i class="fa fa-check"></i><b>35.1</b> The across() function<span></span></a></li>
<li class="chapter" data-level="35.2" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-mutate"><i class="fa fa-check"></i><b>35.2</b> Across with mutate<span></span></a></li>
<li class="chapter" data-level="35.3" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-summarise"><i class="fa fa-check"></i><b>35.3</b> Across with summarise<span></span></a></li>
<li class="chapter" data-level="35.4" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-filter"><i class="fa fa-check"></i><b>35.4</b> Across with filter<span></span></a></li>
<li class="chapter" data-level="35.5" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#summary-2"><i class="fa fa-check"></i><b>35.5</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="writing-for-loops.html"><a href="writing-for-loops.html"><i class="fa fa-check"></i><b>36</b> Writing for loops<span></span></a>
<ul>
<li class="chapter" data-level="36.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#how-to-write-for-loops"><i class="fa fa-check"></i><b>36.1</b> How to write for loops<span></span></a>
<ul>
<li class="chapter" data-level="36.1.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-loop-body"><i class="fa fa-check"></i><b>36.1.1</b> The for loop body<span></span></a></li>
<li class="chapter" data-level="36.1.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-function"><i class="fa fa-check"></i><b>36.1.2</b> The for() function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="36.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-transfer"><i class="fa fa-check"></i><b>36.2</b> Using for loops for data transfer<span></span></a></li>
<li class="chapter" data-level="36.3" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-management"><i class="fa fa-check"></i><b>36.3</b> Using for loops for data management<span></span></a></li>
<li class="chapter" data-level="36.4" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-analysis"><i class="fa fa-check"></i><b>36.4</b> Using for loops for analysis<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html"><i class="fa fa-check"></i><b>37</b> Using the purrr package<span></span></a>
<ul>
<li class="chapter" data-level="37.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#comparing-for-loops-and-the-map-functions"><i class="fa fa-check"></i><b>37.1</b> Comparing for loops and the map functions<span></span></a></li>
<li class="chapter" data-level="37.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-transfer"><i class="fa fa-check"></i><b>37.2</b> Using purrr for data transfer<span></span></a>
<ul>
<li class="chapter" data-level="37.2.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-importing-multiple-sheets-from-an-excel-workbook"><i class="fa fa-check"></i><b>37.2.1</b> Example 1: Importing multiple sheets from an Excel workbook<span></span></a></li>
<li class="chapter" data-level="37.2.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-walk-instead-of-map"><i class="fa fa-check"></i><b>37.2.2</b> Why walk instead of map?<span></span></a></li>
<li class="chapter" data-level="37.2.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-we-didnt-assign-the-return-value-of-walk-to-an-object"><i class="fa fa-check"></i><b>37.2.3</b> why we didn’t assign the return value of <code>walk()</code> to an object?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-management"><i class="fa fa-check"></i><b>37.3</b> Using purrr for data management<span></span></a>
<ul>
<li class="chapter" data-level="37.3.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-adding-na-at-multiple-positions"><i class="fa fa-check"></i><b>37.3.1</b> Example 1: Adding NA at multiple positions<span></span></a></li>
<li class="chapter" data-level="37.3.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2.-detecting-matching-values-by-position"><i class="fa fa-check"></i><b>37.3.2</b> Example 2. Detecting matching values by position<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37.4" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-analysis"><i class="fa fa-check"></i><b>37.4</b> Using purrr for analysis<span></span></a>
<ul>
<li class="chapter" data-level="37.4.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-continuous-statistics"><i class="fa fa-check"></i><b>37.4.1</b> Example 1: Continuous statistics<span></span></a></li>
<li class="chapter" data-level="37.4.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2-categorical-statistics"><i class="fa fa-check"></i><b>37.4.2</b> Example 2: Categorical statistics<span></span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Collaboration<span></span></b></span></li>
<li class="chapter" data-level="38" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html"><i class="fa fa-check"></i><b>38</b> Introduction to git and GitHub<span></span></a>
<ul>
<li class="chapter" data-level="38.1" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#versioning"><i class="fa fa-check"></i><b>38.1</b> Versioning<span></span></a></li>
<li class="chapter" data-level="38.2" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#preservation"><i class="fa fa-check"></i><b>38.2</b> Preservation<span></span></a></li>
<li class="chapter" data-level="38.3" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#reproducibility"><i class="fa fa-check"></i><b>38.3</b> Reproducibility<span></span></a></li>
<li class="chapter" data-level="38.4" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#collaboration"><i class="fa fa-check"></i><b>38.4</b> Collaboration<span></span></a></li>
<li class="chapter" data-level="38.5" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#summary-3"><i class="fa fa-check"></i><b>38.5</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="using-git-and-github.html"><a href="using-git-and-github.html"><i class="fa fa-check"></i><b>39</b> Using git and GitHub<span></span></a>
<ul>
<li class="chapter" data-level="39.1" data-path="using-git-and-github.html"><a href="using-git-and-github.html#install-git"><i class="fa fa-check"></i><b>39.1</b> Install git<span></span></a></li>
<li class="chapter" data-level="39.2" data-path="using-git-and-github.html"><a href="using-git-and-github.html#sign-up-for-a-github-account"><i class="fa fa-check"></i><b>39.2</b> Sign up for a GitHub account<span></span></a></li>
<li class="chapter" data-level="39.3" data-path="using-git-and-github.html"><a href="using-git-and-github.html#install-gitkraken"><i class="fa fa-check"></i><b>39.3</b> Install GitKraken<span></span></a></li>
<li class="chapter" data-level="39.4" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-1-contribute-to-r4epi"><i class="fa fa-check"></i><b>39.4</b> Example 1: Contribute to R4Epi<span></span></a></li>
<li class="chapter" data-level="39.5" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-2-create-a-repository-for-a-research-project"><i class="fa fa-check"></i><b>39.5</b> Example 2: Create a repository for a research project<span></span></a>
<ul>
<li><a href="using-git-and-github.html#step-1-create-a-repository-on-github">Step 1: Create a repository on GitHub<span></span></a></li>
<li><a href="using-git-and-github.html#step-2-clone-the-repository-to-your-computer">Step 2: Clone the repository to your computer<span></span></a></li>
<li><a href="using-git-and-github.html#step-3-add-an-r-project-file-to-the-repository">Step 3: Add an R project file to the repository<span></span></a></li>
<li><a href="using-git-and-github.html#step-4-update-and-commit-gitignore">Step 4: Update and commit gitignore<span></span></a></li>
<li><a href="using-git-and-github.html#step-5-keep-adding-and-committing-files">Step 5: Keep adding and committing files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39.6" data-path="using-git-and-github.html"><a href="using-git-and-github.html#committing-and-pushing"><i class="fa fa-check"></i><b>39.6</b> Committing and pushing<span></span></a></li>
<li class="chapter" data-level="39.7" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-3-contribute-to-a-research-project"><i class="fa fa-check"></i><b>39.7</b> Example 3: Contribute to a research project<span></span></a>
<ul>
<li class="chapter" data-level="39.7.1" data-path="using-git-and-github.html"><a href="using-git-and-github.html#forking-a-repository"><i class="fa fa-check"></i><b>39.7.1</b> Forking a repository<span></span></a></li>
<li class="chapter" data-level="39.7.2" data-path="using-git-and-github.html"><a href="using-git-and-github.html#creating-a-pull-request"><i class="fa fa-check"></i><b>39.7.2</b> Creating a pull request<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39.8" data-path="using-git-and-github.html"><a href="using-git-and-github.html#summary-4"><i class="fa fa-check"></i><b>39.8</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>VIII Presenting Results<span></span></b></span></li>
<li class="chapter" data-level="40" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html"><i class="fa fa-check"></i><b>40</b> Creating tables with R and Microsoft Word<span></span></a>
<ul>
<li class="chapter" data-level="40.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-1"><i class="fa fa-check"></i><b>40.1</b> Table 1<span></span></a></li>
<li class="chapter" data-level="40.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#opioid-drug-use"><i class="fa fa-check"></i><b>40.2</b> Opioid drug use<span></span></a></li>
<li class="chapter" data-level="40.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-columns"><i class="fa fa-check"></i><b>40.3</b> Table columns<span></span></a></li>
<li class="chapter" data-level="40.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-rows"><i class="fa fa-check"></i><b>40.4</b> Table rows<span></span></a></li>
<li class="chapter" data-level="40.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#make-the-table-skeleton"><i class="fa fa-check"></i><b>40.5</b> Make the table skeleton<span></span></a></li>
<li class="chapter" data-level="40.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-column-headers"><i class="fa fa-check"></i><b>40.6</b> Fill in column headers<span></span></a>
<ul>
<li class="chapter" data-level="40.6.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#group-sample-sizes"><i class="fa fa-check"></i><b>40.6.1</b> Group sample sizes<span></span></a></li>
<li class="chapter" data-level="40.6.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-column-headers"><i class="fa fa-check"></i><b>40.6.2</b> Formatting column headers<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.7" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-row-headers"><i class="fa fa-check"></i><b>40.7</b> Fill in row headers<span></span></a>
<ul>
<li class="chapter" data-level="40.7.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#label-statistics"><i class="fa fa-check"></i><b>40.7.1</b> Label statistics<span></span></a></li>
<li class="chapter" data-level="40.7.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-row-headers"><i class="fa fa-check"></i><b>40.7.2</b> Formatting row headers<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.8" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-data-values"><i class="fa fa-check"></i><b>40.8</b> Fill in data values<span></span></a>
<ul>
<li class="chapter" data-level="40.8.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#manually-type-values"><i class="fa fa-check"></i><b>40.8.1</b> Manually type values<span></span></a></li>
<li class="chapter" data-level="40.8.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#copy-and-paste-values"><i class="fa fa-check"></i><b>40.8.2</b> Copy and paste values<span></span></a></li>
<li class="chapter" data-level="40.8.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#knit-a-word-document"><i class="fa fa-check"></i><b>40.8.3</b> Knit a Word document<span></span></a></li>
<li class="chapter" data-level="40.8.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#flextable-and-officer"><i class="fa fa-check"></i><b>40.8.4</b> flextable and officer<span></span></a></li>
<li class="chapter" data-level="40.8.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#significant-digits"><i class="fa fa-check"></i><b>40.8.5</b> Significant digits<span></span></a></li>
<li class="chapter" data-level="40.8.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-data-values"><i class="fa fa-check"></i><b>40.8.6</b> Formatting data values<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.9" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-title"><i class="fa fa-check"></i><b>40.9</b> Fill in title<span></span></a></li>
<li class="chapter" data-level="40.10" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-footnotes"><i class="fa fa-check"></i><b>40.10</b> Fill in footnotes<span></span></a>
<ul>
<li class="chapter" data-level="40.10.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-footnotes"><i class="fa fa-check"></i><b>40.10.1</b> Formatting footnotes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.11" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#final-formatting"><i class="fa fa-check"></i><b>40.11</b> Final formatting<span></span></a>
<ul>
<li class="chapter" data-level="40.11.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#adjust-column-widths"><i class="fa fa-check"></i><b>40.11.1</b> Adjust column widths<span></span></a></li>
<li class="chapter" data-level="40.11.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#merge-cells"><i class="fa fa-check"></i><b>40.11.2</b> Merge cells<span></span></a></li>
<li class="chapter" data-level="40.11.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#remove-cell-borders"><i class="fa fa-check"></i><b>40.11.3</b> Remove cell borders<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.12" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#summary-5"><i class="fa fa-check"></i><b>40.12</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>IX Introduction to Epidemiology<span></span></b></span></li>
<li class="chapter" data-level="41" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html"><i class="fa fa-check"></i><b>41</b> Introduction to Epidemiology<span></span></a>
<ul>
<li class="chapter" data-level="41.1" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#measurement"><i class="fa fa-check"></i><b>41.1</b> Measurement<span></span></a></li>
<li class="chapter" data-level="41.2" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#uncertainty"><i class="fa fa-check"></i><b>41.2</b> Uncertainty<span></span></a></li>
<li class="chapter" data-level="41.3" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#summary-6"><i class="fa fa-check"></i><b>41.3</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>X Appendix<span></span></b></span></li>
<li><a href="appendix-a-glossary.html#appendix-a-glossary">Appendix A: Glossary<span></span></a></li>
<li><a href="appendix-alternative-table-formats.html#appendix-alternative-table-formats">Appendix: Alternative table formats<span></span></a>
<ul>
<li class="chapter" data-level="41.4" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html"><i class="fa fa-check"></i><b>41.4</b> Smaller data frame<span></span></a>
<ul>
<li class="chapter" data-level="41.4.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen"><i class="fa fa-check"></i><b>41.4.1</b> Default method for printing the data frame to the screen<span></span></a></li>
<li class="chapter" data-level="41.4.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function"><i class="fa fa-check"></i><b>41.4.2</b> Using the kable function<span></span></a></li>
<li class="chapter" data-level="41.4.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function"><i class="fa fa-check"></i><b>41.4.3</b> Using the datatable function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="41.5" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#larger-data-frame"><i class="fa fa-check"></i><b>41.5</b> Larger data frame<span></span></a>
<ul>
<li class="chapter" data-level="41.5.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen-1"><i class="fa fa-check"></i><b>41.5.1</b> Default method for printing the data frame to the screen<span></span></a></li>
<li class="chapter" data-level="41.5.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function-1"><i class="fa fa-check"></i><b>41.5.2</b> Using the kable function<span></span></a></li>
<li class="chapter" data-level="41.5.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function-1"><i class="fa fa-check"></i><b>41.5.3</b> Using the datatable function<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Epidemiology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-character-strings" class="section level1 hasAnchor" number="29">
<h1><span class="header-section-number">29</span> Working with character strings<a href="working-with-character-strings.html#working-with-character-strings" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!--
To upper, To lower, Title case
Separating words in character strings
Converting to dummy variables
Save reggex for advanced
Link to complete reggex
-->
<p>In previous chapters, we learned how to create character vectors, which can be useful on their own. We also learned how to coerce character vectors to factor vectors that we can use for categorical data analysis. However, up to this point, we haven’t done a lot of manipulation of the values stored inside of the character strings themselves. Sometimes, however, we will need to manipulate the character string before we can complete other data management tasks or analysis. Some common examples from my projects include separating character strings into multiple parts and creating dummy variables from character strings that can take multiple values. In this chapter, we’ll see some specific example of both, and we’ll learn a few new tools for working with character strings along the way.</p>
<p>To get started, feel free to <a href="https://www.dropbox.com/s/qy778lzafids0om/ehr.Rds?dl=1">download the simulated electronic health record that we will use in the following examples</a>. Additionally, we will use the <code>readr</code>, <code>dplyr</code>, and <code>stringr</code> packages in the code below. You will be able to recognize functions from the <code>stringr</code> package because they will all begin with <code>str_</code>.</p>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="working-with-character-strings.html#cb670-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb670-2"><a href="working-with-character-strings.html#cb670-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb670-3"><a href="working-with-character-strings.html#cb670-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr) <span class="co"># All stringr functions begin with &quot;str_&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="working-with-character-strings.html#cb671-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;/Users/bradcannell/Dropbox/Datasets/epcr/ehr.Rds&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="working-with-character-strings.html#cb672-1" aria-hidden="true" tabindex="-1"></a>ehr </span></code></pre></div>
<pre><code>## # A tibble: 15 × 6
##    admit_date          name               dob        address             city           symptoms
##    &lt;dttm&gt;              &lt;chr&gt;              &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;          &lt;chr&gt;   
##  1 2017-02-01 05:22:30 &quot;Zariah Hernandez&quot; 1944-09-27 3201 ORANGE AVE     FORT WORTH     &quot;\&quot;Pain…
##  2 2017-04-08 09:17:17 &quot;Tatum Chavez&quot;     1952-06-12 1117 richmond ave   Fort Worth     &quot;Pain&quot;  
##  3 2017-04-18 09:17:17 &quot;Tatum S Chavez&quot;   1952-06-12 1117 richmond ave   Fort Worth     &quot;Pain&quot;  
##  4 2017-08-31 18:29:34 &quot;Arabella George&quot;  1966-06-15 357 Angle           FORT WORTH     &quot;\&quot;Naus…
##  5 2017-09-13 06:27:07 &quot;Jasper Decker&quot;    1954-05-11 3612 LAURA ANNE CT. FORT WORTH     &quot;\&quot;Pain…
##  6 2017-09-15 18:29:34 &quot;ARABELLA GEORGE&quot;  1966-06-15 357 Angle           FORT WORTH     &quot;\&quot;Naus…
##  7 2017-10-07 06:31:18 &quot;Weston Fox&quot;       2009-08-21 6433 HATCHER ST     City of Fort … &quot;Pain&quot;  
##  8 2017-10-08 23:17:18 &quot;Ryan Edwards&quot;     1917-12-10 3201 HORIZON PL     City of Sagin…  &lt;NA&gt;   
##  9 2017-10-16 06:31:18 &quot;Weston Fox,&quot;      2009-08-21 6433 HATCHER ST     City of Fort … &quot;Pain&quot;  
## 10 2017-10-26 23:17:18 &quot;Ryan Edwards  &quot;   1917-12-10 3201 HORIZON PL     City of Sagin…  &lt;NA&gt;   
## 11 2017-10-27 18:37:00 &quot;Emma Medrano&quot;     1975-05-01 6301 BEECHCREEK DR  KELLER         &quot;\&quot;Naus…
## 12 2017-12-18 20:47:48 &quot;Ivy Mccann&quot;       1911-06-21 5426 CHILDRESS ST   FORT WORTH     &quot;\&quot;Head…
## 13 2017-12-20 13:40:04 &quot;Charlee Carroll&quot;  1908-07-22 8190 DUCK CREEK CT  City of Fort … &quot;Headac…
## 14 2017-12-26 20:47:48 &quot;Ivy   Mccann&quot;     1911-06-21 5426 CHILDRESS ST   FORT WORTH     &quot;\&quot;Head…
## 15 2018-01-28 08:49:38 &quot;Kane Martin&quot;      1939-10-27 4929 asbury         FORT WORTH      &lt;NA&gt;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>read_csv()</code> function to import a .Rds file containing simulated data into R.</p></li>
<li><p>The simulated data contains admission date (<code>admit_date</code>), the patient’s name (<code>name</code>), the patient’s date of birth (<code>dob</code>), the patient’s address (<code>address</code>), the city the patient lives in (<code>city</code>), and column that contains the symptoms each patient was experiencing at admission (<code>symptoms</code>).</p></li>
<li><p>In this data, date of birth is recorded in the four most common formats that I typically come across.</p></li>
</ul>
<p>A common initial question we may need to ask of this kind of data is, <em>“how many unique people are represented in this data?”</em> Well, there are 15 rows, so a good first guess might be 15 unique people. However, let’s arrange the data by the <code>name</code> column and see if that guess still looks reasonable.</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="working-with-character-strings.html#cb674-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb674-2"><a href="working-with-character-strings.html#cb674-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb674-3"><a href="working-with-character-strings.html#cb674-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">row_number</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb674-4"><a href="working-with-character-strings.html#cb674-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb674-5"><a href="working-with-character-strings.html#cb674-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, dup, dob, address, city)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 5
## # Groups:   name [15]
##    name               dup   dob        address             city              
##    &lt;chr&gt;              &lt;lgl&gt; &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;             
##  1 &quot;Arabella George&quot;  FALSE 1966-06-15 357 Angle           FORT WORTH        
##  2 &quot;ARABELLA GEORGE&quot;  FALSE 1966-06-15 357 Angle           FORT WORTH        
##  3 &quot;Charlee Carroll&quot;  FALSE 1908-07-22 8190 DUCK CREEK CT  City of Fort Worth
##  4 &quot;Emma Medrano&quot;     FALSE 1975-05-01 6301 BEECHCREEK DR  KELLER            
##  5 &quot;Ivy   Mccann&quot;     FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  6 &quot;Ivy Mccann&quot;       FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  7 &quot;Jasper Decker&quot;    FALSE 1954-05-11 3612 LAURA ANNE CT. FORT WORTH        
##  8 &quot;Kane Martin&quot;      FALSE 1939-10-27 4929 asbury         FORT WORTH        
##  9 &quot;Ryan Edwards&quot;     FALSE 1917-12-10 3201 HORIZON PL     City of Saginaw   
## 10 &quot;Ryan Edwards  &quot;   FALSE 1917-12-10 3201 HORIZON PL     City of Saginaw   
## 11 &quot;Tatum Chavez&quot;     FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 12 &quot;Tatum S Chavez&quot;   FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 13 &quot;Weston Fox&quot;       FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 14 &quot;Weston Fox,&quot;      FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 15 &quot;Zariah Hernandez&quot; FALSE 1944-09-27 3201 ORANGE AVE     FORT WORTH</code></pre>
<p>Clearly, some of these people are the same. However, little data entry discrepancies in their name values would prevent us from calculating the number of unique people in a programmatic way. Let’s take a closer look at the values in the <code>name</code> column and see if we can figure out exactly what these data entry discrepancies are:</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="working-with-character-strings.html#cb676-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb676-2"><a href="working-with-character-strings.html#cb676-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb676-3"><a href="working-with-character-strings.html#cb676-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(name)</span></code></pre></div>
<pre><code>##  [1] &quot;Arabella George&quot;  &quot;ARABELLA GEORGE&quot;  &quot;Charlee Carroll&quot;  &quot;Emma Medrano&quot;    
##  [5] &quot;Ivy   Mccann&quot;     &quot;Ivy Mccann&quot;       &quot;Jasper Decker&quot;    &quot;Kane Martin&quot;     
##  [9] &quot;Ryan Edwards&quot;     &quot;Ryan Edwards  &quot;   &quot;Tatum Chavez&quot;     &quot;Tatum S Chavez&quot;  
## [13] &quot;Weston Fox&quot;       &quot;Weston Fox,&quot;      &quot;Zariah Hernandez&quot;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We <code>dplyr</code>’s <code>pull()</code> function to return the <code>name</code> column as a character vector. Doing so makes it easier to see some of the discrepancies in the way the patient’s names were entered into the ehr.</p></li>
<li><p>Notice that Arabella George’s name is written in title case one time and written in all caps another time. Remember that R is case sensitive. So, these two values – “Arabella George” and “ARABELLA GEORGE” – are different values to R.</p></li>
<li><p>Notice that in one instance of Ivy Mccann’s name someone accidently typed two spaces between her first and last name. These two values – “Ivy Mccann” and “Ivy Mccann” – are different values to R.</p></li>
<li><p>Notice that in one instance of Ryan Edwards’ name someone accidently typed an extra space after his last name. These two values – “Ryan Edwards” and “Ryan Edwards” – are different values to R.</p></li>
<li><p>Notice that Tatum Chavez’s name was entered into the ehr <em>with</em> his middle initial on one instance. These two values – “Tatum Chavez” and “Tatum S Chavez” – are different values to R.</p></li>
<li><p>Notice that Weston Fox’s name was entered into the ehr with a comma immediately following his last name on one instance. These two values – “Weston Fox” and “Weston Fox,” – are different values to R.</p></li>
</ul>
<div id="coerce-to-lowercase" class="section level2 hasAnchor" number="29.1">
<h2><span class="header-section-number">29.1</span> Coerce to lowercase<a href="working-with-character-strings.html#coerce-to-lowercase" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A good place to start cleaning these character strings is by coercing them all to lowercase. We’ve already used base R’s <code>tolower()</code> function a couple of times before. So, you may have already guessed how to complete this task. However, before moving on to coercing all the names in our ehr data to lowercase, I want to show you some of the other functions that the <code>stringr</code> package contains for changing the case of character strings. For example:</p>
<div id="lowercase" class="section level3 hasAnchor" number="29.1.1">
<h3><span class="header-section-number">29.1.1</span> Lowercase<a href="working-with-character-strings.html#lowercase" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="working-with-character-strings.html#cb678-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb678-2"><a href="working-with-character-strings.html#cb678-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb678-3"><a href="working-with-character-strings.html#cb678-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb678-4"><a href="working-with-character-strings.html#cb678-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_to_lower</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;arabella george&quot;  &quot;arabella george&quot;  &quot;charlee carroll&quot;  &quot;emma medrano&quot;    
##  [5] &quot;ivy   mccann&quot;     &quot;ivy mccann&quot;       &quot;jasper decker&quot;    &quot;kane martin&quot;     
##  [9] &quot;ryan edwards&quot;     &quot;ryan edwards  &quot;   &quot;tatum chavez&quot;     &quot;tatum s chavez&quot;  
## [13] &quot;weston fox&quot;       &quot;weston fox,&quot;      &quot;zariah hernandez&quot;</code></pre>
</div>
<div id="upper-case" class="section level3 hasAnchor" number="29.1.2">
<h3><span class="header-section-number">29.1.2</span> Upper case<a href="working-with-character-strings.html#upper-case" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="working-with-character-strings.html#cb680-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb680-2"><a href="working-with-character-strings.html#cb680-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb680-3"><a href="working-with-character-strings.html#cb680-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb680-4"><a href="working-with-character-strings.html#cb680-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_to_upper</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;ARABELLA GEORGE&quot;  &quot;ARABELLA GEORGE&quot;  &quot;CHARLEE CARROLL&quot;  &quot;EMMA MEDRANO&quot;    
##  [5] &quot;IVY   MCCANN&quot;     &quot;IVY MCCANN&quot;       &quot;JASPER DECKER&quot;    &quot;KANE MARTIN&quot;     
##  [9] &quot;RYAN EDWARDS&quot;     &quot;RYAN EDWARDS  &quot;   &quot;TATUM CHAVEZ&quot;     &quot;TATUM S CHAVEZ&quot;  
## [13] &quot;WESTON FOX&quot;       &quot;WESTON FOX,&quot;      &quot;ZARIAH HERNANDEZ&quot;</code></pre>
</div>
<div id="title-case" class="section level3 hasAnchor" number="29.1.3">
<h3><span class="header-section-number">29.1.3</span> Title case<a href="working-with-character-strings.html#title-case" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="working-with-character-strings.html#cb682-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb682-2"><a href="working-with-character-strings.html#cb682-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb682-3"><a href="working-with-character-strings.html#cb682-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb682-4"><a href="working-with-character-strings.html#cb682-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_to_title</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;Arabella George&quot;  &quot;Arabella George&quot;  &quot;Charlee Carroll&quot;  &quot;Emma Medrano&quot;    
##  [5] &quot;Ivy   Mccann&quot;     &quot;Ivy Mccann&quot;       &quot;Jasper Decker&quot;    &quot;Kane Martin&quot;     
##  [9] &quot;Ryan Edwards&quot;     &quot;Ryan Edwards  &quot;   &quot;Tatum Chavez&quot;     &quot;Tatum S Chavez&quot;  
## [13] &quot;Weston Fox&quot;       &quot;Weston Fox,&quot;      &quot;Zariah Hernandez&quot;</code></pre>
</div>
<div id="sentence-case" class="section level3 hasAnchor" number="29.1.4">
<h3><span class="header-section-number">29.1.4</span> Sentence case<a href="working-with-character-strings.html#sentence-case" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="working-with-character-strings.html#cb684-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb684-2"><a href="working-with-character-strings.html#cb684-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb684-3"><a href="working-with-character-strings.html#cb684-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb684-4"><a href="working-with-character-strings.html#cb684-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_to_sentence</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;Arabella george&quot;  &quot;Arabella george&quot;  &quot;Charlee carroll&quot;  &quot;Emma medrano&quot;    
##  [5] &quot;Ivy   mccann&quot;     &quot;Ivy mccann&quot;       &quot;Jasper decker&quot;    &quot;Kane martin&quot;     
##  [9] &quot;Ryan edwards&quot;     &quot;Ryan edwards  &quot;   &quot;Tatum chavez&quot;     &quot;Tatum s chavez&quot;  
## [13] &quot;Weston fox&quot;       &quot;Weston fox,&quot;      &quot;Zariah hernandez&quot;</code></pre>
<p>Each of the function above can come in handy from time-to-time. So, you may just want to keep them in your back pocket. Let’s go ahead and use the <code>str_to_lower()</code> function now as the first step in cleaning our data:</p>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="working-with-character-strings.html#cb686-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb686-2"><a href="working-with-character-strings.html#cb686-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">str_to_lower</span>(name)) <span class="sc">%&gt;%</span> </span>
<span id="cb686-3"><a href="working-with-character-strings.html#cb686-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 15 × 6
##    admit_date          name               dob        address             city           symptoms
##    &lt;dttm&gt;              &lt;chr&gt;              &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;          &lt;chr&gt;   
##  1 2017-02-01 05:22:30 &quot;zariah hernandez&quot; 1944-09-27 3201 ORANGE AVE     FORT WORTH     &quot;\&quot;Pain…
##  2 2017-04-08 09:17:17 &quot;tatum chavez&quot;     1952-06-12 1117 richmond ave   Fort Worth     &quot;Pain&quot;  
##  3 2017-04-18 09:17:17 &quot;tatum s chavez&quot;   1952-06-12 1117 richmond ave   Fort Worth     &quot;Pain&quot;  
##  4 2017-08-31 18:29:34 &quot;arabella george&quot;  1966-06-15 357 Angle           FORT WORTH     &quot;\&quot;Naus…
##  5 2017-09-13 06:27:07 &quot;jasper decker&quot;    1954-05-11 3612 LAURA ANNE CT. FORT WORTH     &quot;\&quot;Pain…
##  6 2017-09-15 18:29:34 &quot;arabella george&quot;  1966-06-15 357 Angle           FORT WORTH     &quot;\&quot;Naus…
##  7 2017-10-07 06:31:18 &quot;weston fox&quot;       2009-08-21 6433 HATCHER ST     City of Fort … &quot;Pain&quot;  
##  8 2017-10-08 23:17:18 &quot;ryan edwards&quot;     1917-12-10 3201 HORIZON PL     City of Sagin…  &lt;NA&gt;   
##  9 2017-10-16 06:31:18 &quot;weston fox,&quot;      2009-08-21 6433 HATCHER ST     City of Fort … &quot;Pain&quot;  
## 10 2017-10-26 23:17:18 &quot;ryan edwards  &quot;   1917-12-10 3201 HORIZON PL     City of Sagin…  &lt;NA&gt;   
## 11 2017-10-27 18:37:00 &quot;emma medrano&quot;     1975-05-01 6301 BEECHCREEK DR  KELLER         &quot;\&quot;Naus…
## 12 2017-12-18 20:47:48 &quot;ivy mccann&quot;       1911-06-21 5426 CHILDRESS ST   FORT WORTH     &quot;\&quot;Head…
## 13 2017-12-20 13:40:04 &quot;charlee carroll&quot;  1908-07-22 8190 DUCK CREEK CT  City of Fort … &quot;Headac…
## 14 2017-12-26 20:47:48 &quot;ivy   mccann&quot;     1911-06-21 5426 CHILDRESS ST   FORT WORTH     &quot;\&quot;Head…
## 15 2018-01-28 08:49:38 &quot;kane martin&quot;      1939-10-27 4929 asbury         FORT WORTH      &lt;NA&gt;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We used <code>stringr</code>’s <code>str_to_lower()</code> function to coerce all the letters in the <code>name</code> column to lowercase.</li>
</ul>
<p>Now, let’s check and see how many unique people R finds in our data?</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb688-1"><a href="working-with-character-strings.html#cb688-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb688-2"><a href="working-with-character-strings.html#cb688-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb688-3"><a href="working-with-character-strings.html#cb688-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">row_number</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb688-4"><a href="working-with-character-strings.html#cb688-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb688-5"><a href="working-with-character-strings.html#cb688-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, dup, dob, address, city)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 5
## # Groups:   name [14]
##    name               dup   dob        address             city              
##    &lt;chr&gt;              &lt;lgl&gt; &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;             
##  1 &quot;arabella george&quot;  FALSE 1966-06-15 357 Angle           FORT WORTH        
##  2 &quot;arabella george&quot;  TRUE  1966-06-15 357 Angle           FORT WORTH        
##  3 &quot;charlee carroll&quot;  FALSE 1908-07-22 8190 DUCK CREEK CT  City of Fort Worth
##  4 &quot;emma medrano&quot;     FALSE 1975-05-01 6301 BEECHCREEK DR  KELLER            
##  5 &quot;ivy   mccann&quot;     FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  6 &quot;ivy mccann&quot;       FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  7 &quot;jasper decker&quot;    FALSE 1954-05-11 3612 LAURA ANNE CT. FORT WORTH        
##  8 &quot;kane martin&quot;      FALSE 1939-10-27 4929 asbury         FORT WORTH        
##  9 &quot;ryan edwards&quot;     FALSE 1917-12-10 3201 HORIZON PL     City of Saginaw   
## 10 &quot;ryan edwards  &quot;   FALSE 1917-12-10 3201 HORIZON PL     City of Saginaw   
## 11 &quot;tatum chavez&quot;     FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 12 &quot;tatum s chavez&quot;   FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 13 &quot;weston fox&quot;       FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 14 &quot;weston fox,&quot;      FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 15 &quot;zariah hernandez&quot; FALSE 1944-09-27 3201 ORANGE AVE     FORT WORTH</code></pre>
<p>In the output above, there are 15 rows. R has identified 1 row with a duplicate name (dup == TRUE), which results in a count of 14 unique people. So, simply coercing all the letters to lower case alone helped R figure out that there was a duplicate name value for arabella george. Next, let’s go ahead and remove the trailing space from Ryan Edwards’ name.</p>
</div>
</div>
<div id="trim-white-space" class="section level2 hasAnchor" number="29.2">
<h2><span class="header-section-number">29.2</span> Trim white space<a href="working-with-character-strings.html#trim-white-space" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can use <code>stringr</code>’s <code>str_trim()</code> function to “trim” white space from the beginning and end of character strings. For example:</p>
<div class="sourceCode" id="cb690"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb690-1"><a href="working-with-character-strings.html#cb690-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(<span class="st">&quot;Ryan Edwards  &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Ryan Edwards&quot;</code></pre>
<p>Let’s go ahead and use the <code>str_trim()</code> function now as the next step in cleaning our data:</p>
<div class="sourceCode" id="cb692"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb692-1"><a href="working-with-character-strings.html#cb692-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb692-2"><a href="working-with-character-strings.html#cb692-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">str_trim</span>(name))</span></code></pre></div>
<p>Now, let’s check and see how many unique people R finds in our data?</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb693-1"><a href="working-with-character-strings.html#cb693-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb693-2"><a href="working-with-character-strings.html#cb693-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb693-3"><a href="working-with-character-strings.html#cb693-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">row_number</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb693-4"><a href="working-with-character-strings.html#cb693-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb693-5"><a href="working-with-character-strings.html#cb693-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, dup, dob, address, city)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 5
## # Groups:   name [13]
##    name             dup   dob        address             city              
##    &lt;chr&gt;            &lt;lgl&gt; &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;             
##  1 arabella george  FALSE 1966-06-15 357 Angle           FORT WORTH        
##  2 arabella george  TRUE  1966-06-15 357 Angle           FORT WORTH        
##  3 charlee carroll  FALSE 1908-07-22 8190 DUCK CREEK CT  City of Fort Worth
##  4 emma medrano     FALSE 1975-05-01 6301 BEECHCREEK DR  KELLER            
##  5 ivy   mccann     FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  6 ivy mccann       FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  7 jasper decker    FALSE 1954-05-11 3612 LAURA ANNE CT. FORT WORTH        
##  8 kane martin      FALSE 1939-10-27 4929 asbury         FORT WORTH        
##  9 ryan edwards     FALSE 1917-12-10 3201 HORIZON PL     City of Saginaw   
## 10 ryan edwards     TRUE  1917-12-10 3201 HORIZON PL     City of Saginaw   
## 11 tatum chavez     FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 12 tatum s chavez   FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 13 weston fox       FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 14 weston fox,      FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 15 zariah hernandez FALSE 1944-09-27 3201 ORANGE AVE     FORT WORTH</code></pre>
<p>In the output above, there are 15 rows. R has identified 2 rows with a duplicate name (dup == TRUE), which results in a count of 13 unique people. We’re getting closer. 👏 However, the rest of the discrepancies in the <code>name</code> column that we want to address are a little more complicated. There isn’t a pre-made base R or <code>stringr</code> function that will fix them. Instead, we’ll need to learn how to use something called <strong>regular expressions</strong>.</p>
</div>
<div id="regular-expressions" class="section level2 hasAnchor" number="29.3">
<h2><span class="header-section-number">29.3</span> Regular expressions<a href="working-with-character-strings.html#regular-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Regular expressions, also called <strong>regex</strong> or <strong>regexps</strong>, can be really intimidating at first. In fact, I debated whether or not to even include a discussion of regular expressions at this point in the book. However, regular expressions are <em>the</em> most powerful and flexible tool for manipulating character strings that I am aware of. So, I think it’s important for you to get a little exposure to regular expressions, even if you aren’t a regular expressions expert by the end of this chapter.</p>
<p>The first time you see regular expressions, you will probably think they look like gibberish. For example, here’s a regular expression that I recently used to clean a data set <code>(\d{1,2}\/\d{1,2}\/\d{2})</code>. You can think of regular expressions as an entirely different programming language that the R interpreter can also understand. Regular expressions aren’t unique to R. Many programming languages can accept regular expressions as a way to manipulate character strings.</p>
<p>In the examples that follow, I hope<br />
1. To give you a feel for how regular expression can be useful.<br />
2. Provide you with some specific regular expressions that you may want to save for your epi work (or your class assignments).<br />
3. Provide you with some resources to help you take your regular expression skills to the next level when you are ready.</p>
<div id="remove-the-comma" class="section level3 hasAnchor" number="29.3.1">
<h3><span class="header-section-number">29.3.1</span> Remove the comma<a href="working-with-character-strings.html#remove-the-comma" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For our first example, let’s remove the comma from Weston Fox’s last name.</p>
<div class="sourceCode" id="cb695"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb695-1"><a href="working-with-character-strings.html#cb695-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(</span>
<span id="cb695-2"><a href="working-with-character-strings.html#cb695-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">string      =</span> <span class="st">&quot;weston fox,&quot;</span>, </span>
<span id="cb695-3"><a href="working-with-character-strings.html#cb695-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern     =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb695-4"><a href="working-with-character-strings.html#cb695-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">replacement =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb695-5"><a href="working-with-character-strings.html#cb695-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;weston fox&quot;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>stringr</code>’s <code>str_replace()</code> function remove the comma from the character string “weston fox,”.</p></li>
<li><p>The first argument to the <code>str_replace()</code> function is <code>string</code>. The value passed the <code>string</code> argument should be the character string, or vector of character strings, we want to manipulate.</p></li>
<li><p>The second argument to the <code>str_replace()</code> function is <code>pattern</code>. The value passed the <code>pattern</code> argument should be regular expression. It should tell the <code>str_replace()</code> function what part of the character string we want to replace. In this case, it is a comma (<code>","</code>). We are telling the <code>str_replace()</code> function that we want it to replace the first comma it sees in the character string “weston fox,” with the value we pass to the <code>replacement</code> argument.</p></li>
<li><p>The third argument to the <code>str_replace()</code> function is <code>replacement</code>. The value passed the <code>replacement</code> argument should also be regular expression. It should tell the <code>str_replace()</code> function to what replace the value identified in the <code>pattern</code> argument with. In this case, it is nothing (<code>""</code>) – two double quotes with nothing in-between. We are telling the <code>str_replace()</code> function that we want it to replace the first comma it sees in the character string “weston fox,” with nothing. This is sort of a long-winded way of saying, “delete the comma.”</p></li>
</ul>
<p class="warning">
⚠️<strong>Warning:</strong> Notice that our regular expressions above are wrapped in quotes. Regular expressions should always be wrapped in quotes.
</p>
<p>Let’s go ahead and use the <code>str_replace()</code> function now as the next step in cleaning our data:</p>
<div class="sourceCode" id="cb697"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb697-1"><a href="working-with-character-strings.html#cb697-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb697-2"><a href="working-with-character-strings.html#cb697-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">str_replace</span>(name, <span class="st">&quot;,&quot;</span>, <span class="st">&quot;&quot;</span>))</span></code></pre></div>
<p>Now, let’s check and see how many unique people R finds in our data?</p>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb698-1"><a href="working-with-character-strings.html#cb698-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb698-2"><a href="working-with-character-strings.html#cb698-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb698-3"><a href="working-with-character-strings.html#cb698-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">row_number</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb698-4"><a href="working-with-character-strings.html#cb698-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb698-5"><a href="working-with-character-strings.html#cb698-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, dup, dob, address, city)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 5
## # Groups:   name [12]
##    name             dup   dob        address             city              
##    &lt;chr&gt;            &lt;lgl&gt; &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;             
##  1 arabella george  FALSE 1966-06-15 357 Angle           FORT WORTH        
##  2 arabella george  TRUE  1966-06-15 357 Angle           FORT WORTH        
##  3 charlee carroll  FALSE 1908-07-22 8190 DUCK CREEK CT  City of Fort Worth
##  4 emma medrano     FALSE 1975-05-01 6301 BEECHCREEK DR  KELLER            
##  5 ivy   mccann     FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  6 ivy mccann       FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  7 jasper decker    FALSE 1954-05-11 3612 LAURA ANNE CT. FORT WORTH        
##  8 kane martin      FALSE 1939-10-27 4929 asbury         FORT WORTH        
##  9 ryan edwards     FALSE 1917-12-10 3201 HORIZON PL     City of Saginaw   
## 10 ryan edwards     TRUE  1917-12-10 3201 HORIZON PL     City of Saginaw   
## 11 tatum chavez     FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 12 tatum s chavez   FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 13 weston fox       FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 14 weston fox       TRUE  2009-08-21 6433 HATCHER ST     City of Fort Worth
## 15 zariah hernandez FALSE 1944-09-27 3201 ORANGE AVE     FORT WORTH</code></pre>
<p>In the output above, there are 15 rows. R has identified 3 rows with a duplicate name (dup == TRUE), which results in a count of 12 unique people.</p>
</div>
<div id="remove-middle-initial" class="section level3 hasAnchor" number="29.3.2">
<h3><span class="header-section-number">29.3.2</span> Remove middle initial<a href="working-with-character-strings.html#remove-middle-initial" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, let’s remove the middle initial from Tatum Chavez’s name.</p>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb700-1"><a href="working-with-character-strings.html#cb700-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(</span>
<span id="cb700-2"><a href="working-with-character-strings.html#cb700-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">string      =</span> <span class="st">&quot;tatum s chavez&quot;</span>,</span>
<span id="cb700-3"><a href="working-with-character-strings.html#cb700-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern     =</span> <span class="st">&quot; </span><span class="sc">\\</span><span class="st">w &quot;</span>,</span>
<span id="cb700-4"><a href="working-with-character-strings.html#cb700-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">replacement =</span> <span class="st">&quot; &quot;</span></span>
<span id="cb700-5"><a href="working-with-character-strings.html#cb700-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;tatum chavez&quot;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>stringr</code>’s <code>str_replace()</code> function remove the “s” from the character string “tatum s chavez”.</p></li>
<li><p>The first argument to the <code>str_replace()</code> function is <code>string</code>. The value passed the <code>string</code> argument should be the character string, or vector of character strings, we want to manipulate.</p></li>
<li><p>The second argument to the <code>str_replace()</code> function is <code>pattern</code>. The value passed the <code>pattern</code> argument should be regular expression. It should tell the <code>str_replace()</code> function what part of the character string we want to replace. In this case, it is <code>" \\w "</code>. That is a space, two backslashes, a “w,” and a space. This regular expression looks a little stranger than the last one we saw.</p>
<ul>
<li><p>The <code>\w</code> is called a <strong>token</strong> in regular expression lingo. The <code>\w</code> token means “Any word character.” Any word character includes all the letters of the alphabet upper and lowercase (i.e., <code>[a-zA-Z]</code>), all numbers (i.e., <code>[0-9</code>]), and the underscore character (<code>_</code>).</p></li>
<li><p>When passing regular expression to R, we must always add an additional backslash in front of any other backslash in the regular expression. In this case, <code>\\w</code> instead of <code>\w</code>.</p></li>
<li><p>If we had stopped here (<code>"\\w"</code>), this regular expression would have told the <code>str_replace()</code> function that we want it to replace the first word character it sees in the character string “tatum s chavez” with the value we pass to the <code>replacement</code> argument. In this case, that would have been the “t” at the beginning of “tatum s chavez”.</p></li>
<li><p>The final component of the regular expression we passed to the <code>pattern</code> argument is spaces on both sides of the <code>\\w</code> token. The complete regular expression, <code>" \\w "</code>, tells the <code>str_replace()</code> function that we want it to replace the first time it sees a space, followed by any word character, followed by another space in the character string “tatum s chavez” with the value we pass to the <code>replacement</code> argument. The first section of the character string above that matches that pattern is the ” s ” in “tatum s chavez”.</p></li>
</ul></li>
<li><p>The third argument to the <code>str_replace()</code> function is <code>replacement</code>. The value passed the <code>replacement</code> argument should also be regular expression. It should tell the <code>str_replace()</code> function what to replace the value identified in the <code>pattern</code> argument with. In this case, it is a single space (<code>" "</code>).</p></li>
</ul>
<p>Let’s go ahead and use the <code>str_replace()</code> function now as the next step in cleaning our data:</p>
<div class="sourceCode" id="cb702"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb702-1"><a href="working-with-character-strings.html#cb702-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb702-2"><a href="working-with-character-strings.html#cb702-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">str_replace</span>(name, <span class="st">&quot; </span><span class="sc">\\</span><span class="st">w &quot;</span>, <span class="st">&quot; &quot;</span>))</span></code></pre></div>
<p>And, let’s once again check and see how many unique people R finds in our data?</p>
<div class="sourceCode" id="cb703"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb703-1"><a href="working-with-character-strings.html#cb703-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb703-2"><a href="working-with-character-strings.html#cb703-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb703-3"><a href="working-with-character-strings.html#cb703-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">row_number</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb703-4"><a href="working-with-character-strings.html#cb703-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb703-5"><a href="working-with-character-strings.html#cb703-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, dup, dob, address, city)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 5
## # Groups:   name [11]
##    name             dup   dob        address             city              
##    &lt;chr&gt;            &lt;lgl&gt; &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;             
##  1 arabella george  FALSE 1966-06-15 357 Angle           FORT WORTH        
##  2 arabella george  TRUE  1966-06-15 357 Angle           FORT WORTH        
##  3 charlee carroll  FALSE 1908-07-22 8190 DUCK CREEK CT  City of Fort Worth
##  4 emma medrano     FALSE 1975-05-01 6301 BEECHCREEK DR  KELLER            
##  5 ivy   mccann     FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  6 ivy mccann       FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  7 jasper decker    FALSE 1954-05-11 3612 LAURA ANNE CT. FORT WORTH        
##  8 kane martin      FALSE 1939-10-27 4929 asbury         FORT WORTH        
##  9 ryan edwards     FALSE 1917-12-10 3201 HORIZON PL     City of Saginaw   
## 10 ryan edwards     TRUE  1917-12-10 3201 HORIZON PL     City of Saginaw   
## 11 tatum chavez     FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 12 tatum chavez     TRUE  1952-06-12 1117 richmond ave   Fort Worth        
## 13 weston fox       FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 14 weston fox       TRUE  2009-08-21 6433 HATCHER ST     City of Fort Worth
## 15 zariah hernandez FALSE 1944-09-27 3201 ORANGE AVE     FORT WORTH</code></pre>
<p>In the output above, there are 15 rows. R has identified 4 rows with a duplicate name (dup == TRUE), which results in a count of 11 unique people.</p>
</div>
<div id="remove-double-spaces" class="section level3 hasAnchor" number="29.3.3">
<h3><span class="header-section-number">29.3.3</span> Remove double spaces<a href="working-with-character-strings.html#remove-double-spaces" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Finally, let’s remove the double space from Ivy Mccann’s name.</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb705-1"><a href="working-with-character-strings.html#cb705-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(</span>
<span id="cb705-2"><a href="working-with-character-strings.html#cb705-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">string      =</span> <span class="st">&quot;Ivy   Mccann&quot;</span>,</span>
<span id="cb705-3"><a href="working-with-character-strings.html#cb705-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern     =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">s{2,}&quot;</span>,</span>
<span id="cb705-4"><a href="working-with-character-strings.html#cb705-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">replacement =</span> <span class="st">&quot; &quot;</span></span>
<span id="cb705-5"><a href="working-with-character-strings.html#cb705-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;Ivy Mccann&quot;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>stringr</code>’s <code>str_replace()</code> function remove the double space from the character string “Ivy Mccann”.</p></li>
<li><p>The first argument to the <code>str_replace()</code> function is <code>string</code>. The value passed the <code>string</code> argument should be the character string, or vector of character strings, we want to manipulate.</p></li>
<li><p>The second argument to the <code>str_replace()</code> function is <code>pattern</code>. The value passed the <code>pattern</code> argument should be regular expression. It should tell the <code>str_replace()</code> function what part of the character string we want to replace. In this case, it is <code>\\s{2,}</code>. This regular expression looks even more strange than the last one we saw.</p>
<ul>
<li><p>The <code>\s</code> is another token. The <code>\s</code> token means “Any whitespace character.”</p></li>
<li><p>When passing regular expression to R, we must always add an additional backslash in front of any other backslash in the regular expression. In this case, <code>\\s</code> instead of <code>\s</code>.</p></li>
<li><p>The curly braces with numbers inside is called a <strong>quantifier</strong> in regular expression lingo. The first number inside the curly braces tells <code>str_replace()</code> to look for <em>at least</em> this many occurrences of whatever is immediately before the curly braces in the regular expression. The second number inside the curly braces tells <code>str_replace()</code> to look for <em>no more than</em> this many occurrences of whatever is immediately before the curly braces in the regular expression. When there is no number in the first position, that means that there is no minimum number of occurrences that count. When there is no number is the second position, that means that there is no upper limit of occurrences that count. In this case, the thing immediately before the curly braces in the regular expression was a whitespace (<code>\\s</code>), and the <code>{2,}</code> tells <code>str_replace()</code> to look for between 2 and unlimited consecutive occurrences of whitespace.</p></li>
</ul></li>
<li><p>The third argument to the <code>str_replace()</code> function is <code>replacement</code>. The value passed the <code>replacement</code> argument should also be regular expression. It should tell the <code>str_replace()</code> function what to replace the value identified in the <code>pattern</code> argument with. In this case, it is a single space (<code>" "</code>).</p></li>
</ul>
<p>Let’s go ahead and use the <code>str_replace()</code> function now as the final step in cleaning our <code>name</code> column:</p>
<div class="sourceCode" id="cb707"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb707-1"><a href="working-with-character-strings.html#cb707-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb707-2"><a href="working-with-character-strings.html#cb707-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">str_replace</span>(name, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">s{2,}&quot;</span>, <span class="st">&quot; &quot;</span>))</span></code></pre></div>
<p>Let’s check one final time to see how many unique people R finds in our data.</p>
<div class="sourceCode" id="cb708"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb708-1"><a href="working-with-character-strings.html#cb708-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb708-2"><a href="working-with-character-strings.html#cb708-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb708-3"><a href="working-with-character-strings.html#cb708-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">row_number</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb708-4"><a href="working-with-character-strings.html#cb708-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb708-5"><a href="working-with-character-strings.html#cb708-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, dup, dob, address, city)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 5
## # Groups:   name [10]
##    name             dup   dob        address             city              
##    &lt;chr&gt;            &lt;lgl&gt; &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;             
##  1 arabella george  FALSE 1966-06-15 357 Angle           FORT WORTH        
##  2 arabella george  TRUE  1966-06-15 357 Angle           FORT WORTH        
##  3 charlee carroll  FALSE 1908-07-22 8190 DUCK CREEK CT  City of Fort Worth
##  4 emma medrano     FALSE 1975-05-01 6301 BEECHCREEK DR  KELLER            
##  5 ivy mccann       FALSE 1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  6 ivy mccann       TRUE  1911-06-21 5426 CHILDRESS ST   FORT WORTH        
##  7 jasper decker    FALSE 1954-05-11 3612 LAURA ANNE CT. FORT WORTH        
##  8 kane martin      FALSE 1939-10-27 4929 asbury         FORT WORTH        
##  9 ryan edwards     FALSE 1917-12-10 3201 HORIZON PL     City of Saginaw   
## 10 ryan edwards     TRUE  1917-12-10 3201 HORIZON PL     City of Saginaw   
## 11 tatum chavez     FALSE 1952-06-12 1117 richmond ave   Fort Worth        
## 12 tatum chavez     TRUE  1952-06-12 1117 richmond ave   Fort Worth        
## 13 weston fox       FALSE 2009-08-21 6433 HATCHER ST     City of Fort Worth
## 14 weston fox       TRUE  2009-08-21 6433 HATCHER ST     City of Fort Worth
## 15 zariah hernandez FALSE 1944-09-27 3201 ORANGE AVE     FORT WORTH</code></pre>
<p>In the output above, there are 15 rows. R has identified 5 rows with a duplicate name (dup == TRUE), which results in a count of 10 unique people. This is the answer we wanted! 👏</p>
<p>If our data frame was too big to count unique people manually, we could have R calculate the number of unique people for us like this:</p>
<div class="sourceCode" id="cb710"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb710-1"><a href="working-with-character-strings.html#cb710-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb710-2"><a href="working-with-character-strings.html#cb710-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb710-3"><a href="working-with-character-strings.html#cb710-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb710-4"><a href="working-with-character-strings.html#cb710-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb710-5"><a href="working-with-character-strings.html#cb710-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">`</span><span class="at">Unique People</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   `Unique People`
##             &lt;int&gt;
## 1              10</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>With the exception of <code>filter(row_number() == 1)</code>, you should have seen all of the elements in the code above before.</p></li>
<li><p>We saw the <code>row_number()</code> function used before inside of <code>mutate()</code> to sequentially count the number of rows that belong to each group created with <code>group_by()</code>. We could have done that in the code above. The <code>filter(row_number() == 1)</code> code is really just a shorthand way to write <code>mutate(row = row_number()) %&gt;% filter(row == 1)</code>. It has the effect of telling R to just keep the first row for each group created by <code>group_by()</code>. In this case, just keep the first row for each name in the data frame.</p></li>
</ul>
<p>Now that we know how many unique people are in our data, let’s say we want to know how many of them live in each city that our data contains.</p>
<p>First, we will subset our data to include one row only for each person:</p>
<div class="sourceCode" id="cb712"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb712-1"><a href="working-with-character-strings.html#cb712-1" aria-hidden="true" tabindex="-1"></a>ehr_unique <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb712-2"><a href="working-with-character-strings.html#cb712-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(name) <span class="sc">%&gt;%</span> </span>
<span id="cb712-3"><a href="working-with-character-strings.html#cb712-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb712-4"><a href="working-with-character-strings.html#cb712-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb712-5"><a href="working-with-character-strings.html#cb712-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 6
##    admit_date          name             dob        address             city             symptoms
##    &lt;dttm&gt;              &lt;chr&gt;            &lt;date&gt;     &lt;chr&gt;               &lt;chr&gt;            &lt;chr&gt;   
##  1 2017-02-01 05:22:30 zariah hernandez 1944-09-27 3201 ORANGE AVE     FORT WORTH       &quot;\&quot;Pain…
##  2 2017-04-08 09:17:17 tatum chavez     1952-06-12 1117 richmond ave   Fort Worth       &quot;Pain&quot;  
##  3 2017-08-31 18:29:34 arabella george  1966-06-15 357 Angle           FORT WORTH       &quot;\&quot;Naus…
##  4 2017-09-13 06:27:07 jasper decker    1954-05-11 3612 LAURA ANNE CT. FORT WORTH       &quot;\&quot;Pain…
##  5 2017-10-07 06:31:18 weston fox       2009-08-21 6433 HATCHER ST     City of Fort Wo… &quot;Pain&quot;  
##  6 2017-10-08 23:17:18 ryan edwards     1917-12-10 3201 HORIZON PL     City of Saginaw   &lt;NA&gt;   
##  7 2017-10-27 18:37:00 emma medrano     1975-05-01 6301 BEECHCREEK DR  KELLER           &quot;\&quot;Naus…
##  8 2017-12-18 20:47:48 ivy mccann       1911-06-21 5426 CHILDRESS ST   FORT WORTH       &quot;\&quot;Head…
##  9 2017-12-20 13:40:04 charlee carroll  1908-07-22 8190 DUCK CREEK CT  City of Fort Wo… &quot;Headac…
## 10 2018-01-28 08:49:38 kane martin      1939-10-27 4929 asbury         FORT WORTH        &lt;NA&gt;</code></pre>
<p>Let’s go ahead and get an initial count of how many people live in each city:</p>
<div class="sourceCode" id="cb714"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb714-1"><a href="working-with-character-strings.html#cb714-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb714-2"><a href="working-with-character-strings.html#cb714-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(city) <span class="sc">%&gt;%</span> </span>
<span id="cb714-3"><a href="working-with-character-strings.html#cb714-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   city                   n
##   &lt;chr&gt;              &lt;int&gt;
## 1 City of Fort Worth     3
## 2 City of Saginaw        2
## 3 Fort Worth             2
## 4 FORT WORTH             7
## 5 KELLER                 1</code></pre>
<p>I’m sure you saw this coming, but we have more data entry discrepancies that are preventing us from completing our analysis. Now that you’ve gotten your feet wet with character string manipulation and regular expressions, what do we need to do in order to complete our analysis?</p>
<p>Hopefully, your first instinct by now is to coerce all the letters to lowercase. In fact, one of the first things I typically do is coerce all character columns to lowercase. Let’s do that now.</p>
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb716-1"><a href="working-with-character-strings.html#cb716-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb716-2"><a href="working-with-character-strings.html#cb716-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb716-3"><a href="working-with-character-strings.html#cb716-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">address =</span> <span class="fu">tolower</span>(address),</span>
<span id="cb716-4"><a href="working-with-character-strings.html#cb716-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">city    =</span> <span class="fu">tolower</span>(city)</span>
<span id="cb716-5"><a href="working-with-character-strings.html#cb716-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Now how many people live in each city?</p>
<div class="sourceCode" id="cb717"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb717-1"><a href="working-with-character-strings.html#cb717-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb717-2"><a href="working-with-character-strings.html#cb717-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(city) <span class="sc">%&gt;%</span> </span>
<span id="cb717-3"><a href="working-with-character-strings.html#cb717-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   city                   n
##   &lt;chr&gt;              &lt;int&gt;
## 1 city of fort worth     3
## 2 city of saginaw        2
## 3 fort worth             9
## 4 keller                 1</code></pre>
<p>We’re getting closer to the right answer, but we still need to remove “city of” from some of the values. This sounds like another job for <code>str_replace()</code>.</p>
<div class="sourceCode" id="cb719"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb719-1"><a href="working-with-character-strings.html#cb719-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_replace</span>(</span>
<span id="cb719-2"><a href="working-with-character-strings.html#cb719-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">string      =</span> <span class="st">&quot;city of fort worth&quot;</span>,</span>
<span id="cb719-3"><a href="working-with-character-strings.html#cb719-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern     =</span> <span class="st">&quot;city of &quot;</span>,</span>
<span id="cb719-4"><a href="working-with-character-strings.html#cb719-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">replacement =</span> <span class="st">&quot;&quot;</span></span>
<span id="cb719-5"><a href="working-with-character-strings.html#cb719-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## [1] &quot;fort worth&quot;</code></pre>
<p>That regular expression looks like it will work. Let’s go ahead and use it to remove “city of” from the values in the <code>address_city</code> column now.</p>
<div class="sourceCode" id="cb721"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb721-1"><a href="working-with-character-strings.html#cb721-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb721-2"><a href="working-with-character-strings.html#cb721-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">city =</span> <span class="fu">str_replace</span>(city, <span class="st">&quot;city of &quot;</span>, <span class="st">&quot;&quot;</span>))</span></code></pre></div>
<p>One last time, how many people live in each city?</p>
<div class="sourceCode" id="cb722"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb722-1"><a href="working-with-character-strings.html#cb722-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb722-2"><a href="working-with-character-strings.html#cb722-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(city) <span class="sc">%&gt;%</span> </span>
<span id="cb722-3"><a href="working-with-character-strings.html#cb722-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   city           n
##   &lt;chr&gt;      &lt;int&gt;
## 1 fort worth    12
## 2 keller         1
## 3 saginaw        2</code></pre>
</div>
</div>
<div id="separate-values-into-component-parts" class="section level2 hasAnchor" number="29.4">
<h2><span class="header-section-number">29.4</span> Separate values into component parts<a href="working-with-character-strings.html#separate-values-into-component-parts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another common task that I perform on character strings is to separate the strings into multiple parts. For example, sometimes we may want to separate full names into two columns. One for fist name and one for last name. To complete this task, we will once again use regular expressions. We will also learn how to use the <code>str_extract()</code> function to pull values out of a character string when the match a pattern we create with a regular expression.</p>
<div class="sourceCode" id="cb724"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb724-1"><a href="working-with-character-strings.html#cb724-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(<span class="st">&quot;zariah hernandez&quot;</span>, <span class="st">&quot;^</span><span class="sc">\\</span><span class="st">w+&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;zariah&quot;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>stringr</code>’s <code>str_extract()</code> function pull the first name out of the full name “zariah hernandez”.</p></li>
<li><p>The first argument to the <code>str_extract()</code> function is <code>string</code>. The value passed the <code>string</code> argument should be the character string, or vector of character strings, we want to manipulate.</p></li>
<li><p>The second argument to the <code>str_extract()</code> function is <code>pattern</code>. The value passed the <code>pattern</code> argument should be regular expression. It should tell the <code>str_extract()</code> function what part of the character string we want to pull out of the character string. In this case, it is <code>^\\w+</code>.</p>
<ul>
<li><p>We’ve already seen that the <code>\w</code> token means “Any word character.”</p></li>
<li><p>When passing regular expression to R, we must always add an additional backslash in front of any other backslash in the regular expression. In this case, <code>\\w</code> instead of <code>\w</code>.</p></li>
<li><p>The carrot (<code>^</code>) is a type of <strong>anchor</strong> in regular expression lingo. It tells the <code>str_extract()</code> function to look for the pattern at the start of the character sting only.</p></li>
<li><p>The plus sign (<code>+</code>) is another quantifier. It means, “match the pattern one or more times.”</p></li>
<li><p>Taken together, <code>^\\w+</code> tells the <code>str_extract()</code> function to look for one or more consecutive word characters beginning at the start of the character string and extract them.</p></li>
<li><p>The first word character at the start of the string is “z”, then “a”, then “riah”. Finally, R gets to the space between “zariah” and “hernandez”, which isn’t a word character, and stops the extraction. The result is “zariah”.</p></li>
</ul></li>
</ul>
<p>We can pull the last name from the character string in a similar way:</p>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb726-1"><a href="working-with-character-strings.html#cb726-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_extract</span>(<span class="st">&quot;zariah hernandez&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w+$&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;hernandez&quot;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>stringr</code>’s <code>str_extract()</code> function pull the last name out of the full name “zariah hernandez”.</p></li>
<li><p>The first argument to the <code>str_extract()</code> function is <code>string</code>. The value passed the <code>string</code> argument should be the character string, or vector of character strings, we want to manipulate.</p></li>
<li><p>The second argument to the <code>str_extract()</code> function is <code>pattern</code>. The value passed the <code>pattern</code> argument should be regular expression. It should tell the <code>str_extract()</code> function what part of the character string we want to pull out of the character string. In this case, it is <code>\\w+$</code>.</p>
<ul>
<li><p>We’ve already seen that the <code>\w</code> token means “Any word character.”</p></li>
<li><p>When passing regular expression to R, we must always add an additional backslash in front of any other backslash in the regular expression. In this case, <code>\\w</code> instead of <code>\w</code>.</p></li>
<li><p>The dollar sign (<code>$</code>) is another type of anchor. It tells the <code>str_extract()</code> function to look for the pattern at the end of the string only.</p></li>
<li><p>We’ve already seen that the plus sign (<code>+</code>) is a quantifier that means, “match the pattern one or more times.”</p></li>
</ul>
<p>-Taken together, <code>\\w+$</code> tells the <code>str_extract()</code> function to look for one or more consecutive word characters beginning at the end of the string and extract them.</p>
<ul>
<li>The first word character at the end of the string is “z”, then “e”, then “dnanreh”. Finally, R gets to the space between “zariah” and “hernandez”, which isn’t a word character, and stops the extraction. The result is “hernandez”.</li>
</ul></li>
</ul>
<p>Now, let’s use <code>str_extract()</code> to separate full name into <code>name_first</code> and <code>name_last</code>.</p>
<div class="sourceCode" id="cb728"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb728-1"><a href="working-with-character-strings.html#cb728-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb728-2"><a href="working-with-character-strings.html#cb728-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb728-3"><a href="working-with-character-strings.html#cb728-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Separate name into first name and last name</span></span>
<span id="cb728-4"><a href="working-with-character-strings.html#cb728-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">name_first =</span> <span class="fu">str_extract</span>(name, <span class="st">&quot;^</span><span class="sc">\\</span><span class="st">w+&quot;</span>),</span>
<span id="cb728-5"><a href="working-with-character-strings.html#cb728-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">name_last  =</span> <span class="fu">str_extract</span>(name, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">w+$&quot;</span>)</span>
<span id="cb728-6"><a href="working-with-character-strings.html#cb728-6" aria-hidden="true" tabindex="-1"></a>  ) </span></code></pre></div>
<div class="sourceCode" id="cb729"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb729-1"><a href="working-with-character-strings.html#cb729-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb729-2"><a href="working-with-character-strings.html#cb729-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, name_first, name_last)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 3
##    name             name_first name_last
##    &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;    
##  1 zariah hernandez zariah     hernandez
##  2 tatum chavez     tatum      chavez   
##  3 tatum chavez     tatum      chavez   
##  4 arabella george  arabella   george   
##  5 jasper decker    jasper     decker   
##  6 arabella george  arabella   george   
##  7 weston fox       weston     fox      
##  8 ryan edwards     ryan       edwards  
##  9 weston fox       weston     fox      
## 10 ryan edwards     ryan       edwards  
## 11 emma medrano     emma       medrano  
## 12 ivy mccann       ivy        mccann   
## 13 charlee carroll  charlee    carroll  
## 14 ivy mccann       ivy        mccann   
## 15 kane martin      kane       martin</code></pre>
<p>The regular expressions we used in the examples above weren’t super complex. I hope that leaves you feeling like you can use regular expression to complete data cleaning tasks that are actually useful, even if you haven’t totally mastered them yet (I haven’t totally mastered them either).</p>
<p>Before moving on, I want to introduce you to a free tool I use when I have to do more complex character string manipulations with regular expressions. It is the <a href="https://regex101.com/#python">regular expressions 101 online regex tester and debugger</a>.</p>
<p><img src="img/05_part_data_management/05_working_with_character_vectors/regex101.png" width="900" /></p>
<p>In the screenshot above, I highlight some of the really cool features of the regex tester and debugger.</p>
<ul>
<li><p>First, you can use the regex tester without logging in. However, I typically do log in because that allows me to save regular expressions and use them again later.</p></li>
<li><p>The top input box on the screen corresponds to what you would type into the <code>pattern</code> argument of the <code>str_replace()</code> function.</p></li>
<li><p>The middle input box on the screen corresponds to what you would type into the <code>string</code> argument of the <code>str_replace()</code> function.</p></li>
<li><p>The third input box on the screen corresponds to what you would type into the <code>replacement</code> argument of the <code>str_replace()</code> function, and the results are presented below.</p></li>
<li><p>In addition, the regex tester and debugger has a quick reference pane that allows you to lookup different elements you might want to use in your regular expression. It also has an explanation pane that tells you what each of the elements in the current regular expression you typed out mean.</p></li>
</ul>
</div>
<div id="dummy-variables" class="section level2 hasAnchor" number="29.5">
<h2><span class="header-section-number">29.5</span> Dummy variables<a href="working-with-character-strings.html#dummy-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data collection tools in epidemiology often include “check all that apply” questions. In our <code>ehr</code> example data, patients were asked about what symptoms they were experiencing at admission. The choices were pain, headache, and nausea. They were allowed to check any combination of the three that they wanted. That results in a <code>symptoms</code> column in our data frame that looks like this:</p>
<p class="note">
🗒<strong>Side Note:</strong> Any categorical variable can be transformed into dummy variables. Not just the variables that result from “check all that apply” survey questions. However, the “check all that apply” survey questions often require extra data cleaning steps relative to categorical variables that can only take a single value in each row.
</p>
<div class="sourceCode" id="cb731"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb731-1"><a href="working-with-character-strings.html#cb731-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb731-2"><a href="working-with-character-strings.html#cb731-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name_first, name_last, symptoms)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 3
##    name_first name_last symptoms                            
##    &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;                               
##  1 zariah     hernandez &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;, \&quot;Nausea\&quot;&quot;
##  2 tatum      chavez    &quot;Pain&quot;                              
##  3 tatum      chavez    &quot;Pain&quot;                              
##  4 arabella   george    &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;          
##  5 jasper     decker    &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;&quot;            
##  6 arabella   george    &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;          
##  7 weston     fox       &quot;Pain&quot;                              
##  8 ryan       edwards    &lt;NA&gt;                               
##  9 weston     fox       &quot;Pain&quot;                              
## 10 ryan       edwards    &lt;NA&gt;                               
## 11 emma       medrano   &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;          
## 12 ivy        mccann    &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot;
## 13 charlee    carroll   &quot;Headache&quot;                          
## 14 ivy        mccann    &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot;
## 15 kane       martin     &lt;NA&gt;</code></pre>
<p>Notice that some people didn’t report their symptoms (<code>NA</code>), some people reported only one symptom, and some people reported multiple symptoms. The way the data is currently formatted is not ideal for analysis. For example, if I asked you to tell me how many people ever came in complaining of headache, how would you do that? Maybe like this:</p>
<div class="sourceCode" id="cb733"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb733-1"><a href="working-with-character-strings.html#cb733-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb733-2"><a href="working-with-character-strings.html#cb733-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(symptoms) <span class="sc">%&gt;%</span> </span>
<span id="cb733-3"><a href="working-with-character-strings.html#cb733-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 7 × 2
##   symptoms                                 n
##   &lt;chr&gt;                                &lt;int&gt;
## 1 &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot;     2
## 2 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;               3
## 3 &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;&quot;                 1
## 4 &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;, \&quot;Nausea\&quot;&quot;     1
## 5 &quot;Headache&quot;                               1
## 6 &quot;Pain&quot;                                   4
## 7  &lt;NA&gt;                                    3</code></pre>
<p>In this case, you could probably count manually and get the right answer. But what if we had many more possible symptoms and many more rows. Counting would quickly become tedious and error prone. The solution is to create dummy variables. We can create dummy variables like this:</p>
<div class="sourceCode" id="cb735"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb735-1"><a href="working-with-character-strings.html#cb735-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb735-2"><a href="working-with-character-strings.html#cb735-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb735-3"><a href="working-with-character-strings.html#cb735-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">pain     =</span> <span class="fu">str_detect</span>(symptoms, <span class="st">&quot;Pain&quot;</span>),</span>
<span id="cb735-4"><a href="working-with-character-strings.html#cb735-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">headache =</span> <span class="fu">str_detect</span>(symptoms, <span class="st">&quot;Headache&quot;</span>),</span>
<span id="cb735-5"><a href="working-with-character-strings.html#cb735-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">nausea   =</span> <span class="fu">str_detect</span>(symptoms, <span class="st">&quot;Nausea&quot;</span>)</span>
<span id="cb735-6"><a href="working-with-character-strings.html#cb735-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb736"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb736-1"><a href="working-with-character-strings.html#cb736-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb736-2"><a href="working-with-character-strings.html#cb736-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(symptoms, pain, headache, nausea)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##    symptoms                             pain  headache nausea
##    &lt;chr&gt;                                &lt;lgl&gt; &lt;lgl&gt;    &lt;lgl&gt; 
##  1 &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;, \&quot;Nausea\&quot;&quot; TRUE  TRUE     TRUE  
##  2 &quot;Pain&quot;                               TRUE  FALSE    FALSE 
##  3 &quot;Pain&quot;                               TRUE  FALSE    FALSE 
##  4 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;           FALSE TRUE     TRUE  
##  5 &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;&quot;             TRUE  TRUE     FALSE 
##  6 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;           FALSE TRUE     TRUE  
##  7 &quot;Pain&quot;                               TRUE  FALSE    FALSE 
##  8  &lt;NA&gt;                                NA    NA       NA    
##  9 &quot;Pain&quot;                               TRUE  FALSE    FALSE 
## 10  &lt;NA&gt;                                NA    NA       NA    
## 11 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;           FALSE TRUE     TRUE  
## 12 &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot; TRUE  TRUE     TRUE  
## 13 &quot;Headache&quot;                           FALSE TRUE     FALSE 
## 14 &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot; TRUE  TRUE     TRUE  
## 15  &lt;NA&gt;                                NA    NA       NA</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>stringr</code>’s <code>str_detect()</code> function create three new dummy variables in our data frame.</p></li>
<li><p>The first argument to the <code>str_detect()</code> function is <code>string</code>. The value passed the <code>string</code> argument should be the character string, or vector of character stings, we want to manipulate.</p></li>
<li><p>The second argument to the <code>str_detect()</code> function is <code>pattern</code>. The value passed the <code>pattern</code> argument should be regular expression. The <code>str_detect()</code> function returns <code>TRUE</code> if it finds the pattern in the string and <code>FALSE</code> if it does not find the pattern in the string.</p></li>
<li><p>Instead of having a single <code>symptoms</code> column that can take different combinations of the values <code>pain</code>, <code>headache</code>, and <code>nausea</code>, we create a new column for each value – the so-called dummy variables.</p></li>
<li><p>Each dummy variable can take the value <code>TRUE</code>, <code>FALSE</code>, or <code>NA</code>. The value for each dummy variable is <code>TRUE</code> in rows were that symptom was reported and <code>FALSE</code> in rows where the symptom was not reported. For example, the value in the first row of the <code>pain</code> column is <code>TRUE</code> because the value in the first row of <code>symptoms</code> column (“Pain”, “Headache”, “Nausea”) includes “Pain”. However, the value in the fourth row of the <code>pain</code> column is <code>FALSE</code> because the value in the fourth row of <code>symptoms</code> column (“Nausea”, “Headache”) does not include “Pain”.</p></li>
</ul>
<p>Now, we can much more easily figure out how many people had each symptom.</p>
<div class="sourceCode" id="cb738"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb738-1"><a href="working-with-character-strings.html#cb738-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ehr<span class="sc">$</span>headache)</span></code></pre></div>
<pre><code>## 
## FALSE  TRUE 
##     4     8</code></pre>
<p>I should acknowledge that dummy variables typically take the values 0 and 1 instead of FALSE and TRUE. We can easily coerce our dummy variable values to 0/1 using the <code>as.numeric()</code> function. For example:</p>
<div class="sourceCode" id="cb740"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb740-1"><a href="working-with-character-strings.html#cb740-1" aria-hidden="true" tabindex="-1"></a>ehr <span class="sc">%&gt;%</span> </span>
<span id="cb740-2"><a href="working-with-character-strings.html#cb740-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pain) <span class="sc">%&gt;%</span> </span>
<span id="cb740-3"><a href="working-with-character-strings.html#cb740-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pain_01 =</span> <span class="fu">as.numeric</span>(pain))</span></code></pre></div>
<pre><code>## # A tibble: 15 × 2
##    pain  pain_01
##    &lt;lgl&gt;   &lt;dbl&gt;
##  1 TRUE        1
##  2 TRUE        1
##  3 TRUE        1
##  4 FALSE       0
##  5 TRUE        1
##  6 FALSE       0
##  7 TRUE        1
##  8 NA         NA
##  9 TRUE        1
## 10 NA         NA
## 11 FALSE       0
## 12 TRUE        1
## 13 FALSE       0
## 14 TRUE        1
## 15 NA         NA</code></pre>
<p>However, this step is sort of unnecessary in most cases because R treats <code>TRUE</code> and <code>FALSE</code> as <code>1</code> and <code>0</code> respectively when logical (i.e., TRUE/FALSE) vectors are passed to functions or operators that perform a mathematical operation.</p>
<p>That concludes the chapter on working with character strings. Don’t beat yourself up if you’re feeling confused about regular expressions. They are really tough to wrap your head around at first! But, at least now you know they exist and can be useful for manipulating character strings. If you come across more complicated situations in the future, I suggest starting by checking out the <a href="https://stringr.tidyverse.org/index.html">stringr cheat sheet</a> and practicing with the <a href="https://regex101.com/#python">regular expressions 101 online regex tester and debugger</a> before writing any R code.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-dates.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conditional-operations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/brad-cannell/r4epi/edit/master/chapters/05_part_data_management/05_working_with_character_vectors.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
